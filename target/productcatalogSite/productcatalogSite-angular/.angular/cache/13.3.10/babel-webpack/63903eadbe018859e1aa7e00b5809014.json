{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nimport { Inject } from '../Application';\nimport { Constants } from '../Contract';\nimport { ErrorCodes, ExceptionHandlerClass } from '../System/Aop';\nimport { AliasBehavior } from './Behaviors';\n\nvar TypeService = function () {\n  function TypeService(inject) {\n    if (inject === void 0) {\n      inject = null;\n    }\n\n    this.inject = inject || Inject.Instance;\n    this.modelResolver = this.inject.resolve(Constants.ModelResolver);\n    this.behaviorEnabled = false;\n  }\n\n  TypeService.prototype.getAlias = function (model, alias) {\n    return this.aliases[model.toString()][alias][0];\n  };\n\n  TypeService.prototype.setAliases = function (aliases) {\n    this.aliases = aliases;\n  };\n\n  TypeService.prototype.init = function (data) {\n    this.enableAliasBehavior(data.DefaultsAndAlias);\n    this.typesInfo = data.TypesInfo;\n  };\n\n  TypeService.prototype.setTypes = function (typesInfo) {\n    this.typesInfo = typesInfo;\n  };\n\n  TypeService.prototype.getTypeInfo = function (typeId) {\n    return this.typesInfo[typeId];\n  };\n\n  TypeService.prototype.enableAliasBehavior = function (aliasesInfo) {\n    if (aliasesInfo && !this.behaviorEnabled) {\n      var firstKey = Object.keys(aliasesInfo)[0];\n\n      if (aliasesInfo[firstKey] !== undefined && Object.keys(aliasesInfo[firstKey]).length > 0) {\n        this.modelResolver.registerBehavior(new AliasBehavior());\n        this.aliases = aliasesInfo;\n        this.behaviorEnabled = true;\n      }\n    }\n  };\n\n  TypeService = __decorate([ExceptionHandlerClass(ErrorCodes.ClientCore), __metadata(\"design:paramtypes\", [Object])], TypeService);\n  return TypeService;\n}();\n\nexport { TypeService }; //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHlwZVNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvQ29yZS9UeXBlU2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFrQkEsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ3hDLE9BQU8sRUFBRSxTQUFTLEVBQXlDLE1BQU0sYUFBYSxDQUFDO0FBQy9FLE9BQU8sRUFBRSxVQUFVLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFbEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGFBQWEsQ0FBQztBQUc1QztJQUVJLHFCQUFZLE1BQXNCO1FBQXRCLHVCQUFBLEVBQUEsYUFBc0I7UUFDOUIsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLElBQUksTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUN4QyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUNsRSxJQUFJLENBQUMsZUFBZSxHQUFHLEtBQUssQ0FBQztJQUNqQyxDQUFDO0lBT0QsOEJBQVEsR0FBUixVQUFTLEtBQWEsRUFBRSxLQUFhO1FBQ2pDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQsZ0NBQVUsR0FBVixVQUFXLE9BQVk7UUFDbkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7SUFDM0IsQ0FBQztJQUVELDBCQUFJLEdBQUosVUFBSyxJQUFTO1FBQ1YsSUFBSSxDQUFDLG1CQUFtQixDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ2hELElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQztJQUNwQyxDQUFDO0lBRUQsOEJBQVEsR0FBUixVQUFTLFNBQWM7UUFDbkIsSUFBSSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7SUFDL0IsQ0FBQztJQUVELGlDQUFXLEdBQVgsVUFBWSxNQUFjO1FBQ3RCLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUNsQyxDQUFDO0lBRU8seUNBQW1CLEdBQTNCLFVBQTRCLFdBQWdCO1FBQ3hDLElBQUksV0FBVyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRTtZQUN0QyxJQUFNLFFBQVEsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdDLElBQUksV0FBVyxDQUFDLFFBQVEsQ0FBQyxLQUFLLFNBQVMsSUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7Z0JBQ3RGLElBQUksQ0FBQyxhQUFhLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxhQUFhLEVBQUUsQ0FBQyxDQUFDO2dCQUN6RCxJQUFJLENBQUMsT0FBTyxHQUFHLFdBQVcsQ0FBQztnQkFDM0IsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUM7YUFDL0I7U0FDSjtJQUNMLENBQUM7SUEzQ1EsV0FBVztRQUR2QixxQkFBcUIsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDOztPQUNoQyxXQUFXLENBNEN2QjtJQUFELGtCQUFDO0NBQUEsQUE1Q0QsSUE0Q0M7U0E1Q1ksV0FBVyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4qIENvcHlyaWdodCAoQykgTW9iaWxpemUuTmV0IDxpbmZvQG1vYmlsaXplLm5ldD4gLSBBbGwgUmlnaHRzIFJlc2VydmVkXHJcbipcclxuKiBUaGlzIGZpbGUgaXMgcGFydCBvZiB0aGUgTW9iaWxpemUgRnJhbWV3b3Jrcywgd2hpY2ggaXNcclxuKiBwcm9wcmlldGFyeSBhbmQgY29uZmlkZW50aWFsLlxyXG4qXHJcbiogTk9USUNFOiAgQWxsIGluZm9ybWF0aW9uIGNvbnRhaW5lZCBoZXJlaW4gaXMsIGFuZCByZW1haW5zXHJcbiogdGhlIHByb3BlcnR5IG9mIE1vYmlsaXplLk5ldCBDb3Jwb3JhdGlvbi5cclxuKiBUaGUgaW50ZWxsZWN0dWFsIGFuZCB0ZWNobmljYWwgY29uY2VwdHMgY29udGFpbmVkIGhlcmVpbiBhcmVcclxuKiBwcm9wcmlldGFyeSB0byBNb2JpbGl6ZS5OZXQgQ29ycG9yYXRpb24gYW5kIG1heSBiZSBjb3ZlcmVkXHJcbiogYnkgVS5TLiBQYXRlbnRzLCBhbmQgYXJlIHByb3RlY3RlZCBieSB0cmFkZSBzZWNyZXQgb3IgY29weXJpZ2h0IGxhdy5cclxuKiBEaXNzZW1pbmF0aW9uIG9mIHRoaXMgaW5mb3JtYXRpb24gb3IgcmVwcm9kdWN0aW9uIG9mIHRoaXMgbWF0ZXJpYWxcclxuKiBpcyBzdHJpY3RseSBmb3JiaWRkZW4gdW5sZXNzIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbiBpcyBvYnRhaW5lZFxyXG4qIGZyb20gTW9iaWxpemUuTmV0IENvcnBvcmF0aW9uLlxyXG4qXHJcbiogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIGRlZmluZWQgaW5cclxuKiBmaWxlICdMSUNFTlNFLnR4dCcsIHdoaWNoIGlzIHBhcnQgb2YgdGhpcyBzb3VyY2UgY29kZSBwYWNrYWdlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuaW1wb3J0IHsgSW5qZWN0IH0gZnJvbSAnLi4vQXBwbGljYXRpb24nO1xyXG5pbXBvcnQgeyBDb25zdGFudHMsIElJbmplY3QsIElNb2RlbFJlc29sdmVyLCBJVHlwZVNlcnZpY2UgfSBmcm9tICcuLi9Db250cmFjdCc7XHJcbmltcG9ydCB7IEVycm9yQ29kZXMsIEV4Y2VwdGlvbkhhbmRsZXJDbGFzcyB9IGZyb20gJy4uL1N5c3RlbS9Bb3AnO1xyXG5cclxuaW1wb3J0IHsgQWxpYXNCZWhhdmlvciB9IGZyb20gJy4vQmVoYXZpb3JzJztcclxuXHJcbkBFeGNlcHRpb25IYW5kbGVyQ2xhc3MoRXJyb3JDb2Rlcy5DbGllbnRDb3JlKVxyXG5leHBvcnQgY2xhc3MgVHlwZVNlcnZpY2UgaW1wbGVtZW50cyBJVHlwZVNlcnZpY2Uge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGluamVjdDogSUluamVjdCA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLmluamVjdCA9IGluamVjdCB8fCBJbmplY3QuSW5zdGFuY2U7XHJcbiAgICAgICAgdGhpcy5tb2RlbFJlc29sdmVyID0gdGhpcy5pbmplY3QucmVzb2x2ZShDb25zdGFudHMuTW9kZWxSZXNvbHZlcik7XHJcbiAgICAgICAgdGhpcy5iZWhhdmlvckVuYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgYWxpYXNlczogYW55O1xyXG4gICAgcHJpdmF0ZSB0eXBlc0luZm86IGFueTtcclxuICAgIHByaXZhdGUgaW5qZWN0OiBJSW5qZWN0O1xyXG4gICAgcHJpdmF0ZSBtb2RlbFJlc29sdmVyOiBJTW9kZWxSZXNvbHZlcjtcclxuICAgIHByaXZhdGUgYmVoYXZpb3JFbmFibGVkOiBib29sZWFuO1xyXG5cclxuICAgIGdldEFsaWFzKG1vZGVsOiBzdHJpbmcsIGFsaWFzOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmFsaWFzZXNbbW9kZWwudG9TdHJpbmcoKV1bYWxpYXNdWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEFsaWFzZXMoYWxpYXNlczogYW55KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hbGlhc2VzID0gYWxpYXNlcztcclxuICAgIH1cclxuXHJcbiAgICBpbml0KGRhdGE6IGFueSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZW5hYmxlQWxpYXNCZWhhdmlvcihkYXRhLkRlZmF1bHRzQW5kQWxpYXMpO1xyXG4gICAgICAgIHRoaXMudHlwZXNJbmZvID0gZGF0YS5UeXBlc0luZm87XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VHlwZXModHlwZXNJbmZvOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnR5cGVzSW5mbyA9IHR5cGVzSW5mbztcclxuICAgIH1cclxuXHJcbiAgICBnZXRUeXBlSW5mbyh0eXBlSWQ6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZXNJbmZvW3R5cGVJZF07XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbmFibGVBbGlhc0JlaGF2aW9yKGFsaWFzZXNJbmZvOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICBpZiAoYWxpYXNlc0luZm8gJiYgIXRoaXMuYmVoYXZpb3JFbmFibGVkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0S2V5ID0gT2JqZWN0LmtleXMoYWxpYXNlc0luZm8pWzBdO1xyXG4gICAgICAgICAgICBpZiAoYWxpYXNlc0luZm9bZmlyc3RLZXldICE9PSB1bmRlZmluZWQgJiYgT2JqZWN0LmtleXMoYWxpYXNlc0luZm9bZmlyc3RLZXldKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vZGVsUmVzb2x2ZXIucmVnaXN0ZXJCZWhhdmlvcihuZXcgQWxpYXNCZWhhdmlvcigpKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxpYXNlcyA9IGFsaWFzZXNJbmZvO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iZWhhdmlvckVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiJdfQ==","map":null,"metadata":{},"sourceType":"module"}