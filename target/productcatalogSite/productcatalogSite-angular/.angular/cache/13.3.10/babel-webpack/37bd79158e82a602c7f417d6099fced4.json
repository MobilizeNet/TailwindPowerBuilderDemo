{"ast":null,"code":"import { deepExtend, addClass, keys, hasClasses, setDefaultOptions } from '../common';\nimport { Observable } from './scroller/observable';\nimport { on, off, setDefaultEvents, convertToHtml } from './utils';\n\nfunction createButton(direction, iconClass) {\n  const html = '<button class=\"k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-' + direction + '\" title=\"zoom-' + direction + '\" aria-label=\"zoom-' + direction + '\">' + '<span class=\"k-icon ' + iconClass + '\">' + '</span>' + '</button>';\n  return convertToHtml(html);\n}\n\nlet PLUS = 187;\nlet MINUS = 189;\nlet FF_PLUS = 61;\nlet FF_MINUS = 173;\nconst CHANGE = \"change\";\nexport class ZoomControl extends Observable {\n  constructor(element, options) {\n    super();\n    this.element = element;\n\n    this._initOptions(options);\n\n    const zoomInButton = createButton('in', 'k-i-plus');\n    const zoomOutButton = createButton('out', 'k-i-minus');\n    this.element.appendChild(zoomInButton);\n    this.element.appendChild(zoomOutButton);\n    addClass(this.element, 'k-widget k-zoom-control k-button-group k-group-horizontal');\n    this._clickHandler = this._click.bind(this);\n    on(this.element, \"click\", \".k-button\", this._clickHandler);\n    let parentElement = this.element.parentNode.closest(\"[data-role]\");\n    this._keyroot = parentElement ? parentElement : this.element;\n\n    this._tabindex(this._keyroot);\n\n    this._keydownHandler = this._keydown.bind(this);\n    on(this._keyroot, \"keydown\", this._keydownHandler);\n  }\n\n  destroy() {\n    if (this.element) {\n      off(this.element, \"click\", this._clickHandler);\n    }\n\n    if (this._keyroot) {\n      off(this._keyroot, 'keydown', this._keydownHandler);\n    }\n  }\n\n  _tabindex(target) {\n    const targetElement = target || this.wrapper || this.element;\n    let element = this.element,\n        TABINDEX = \"tabindex\",\n        tabindex = targetElement.getAttribute(TABINDEX) || element.getAttribute(TABINDEX);\n    element.removeAttribute(TABINDEX);\n    targetElement.setAttribute(TABINDEX, !isNaN(tabindex) ? tabindex : 0);\n  }\n\n  _initOptions(options) {\n    this.options = deepExtend({}, this.options, options);\n  }\n\n  _change(direction) {\n    let zoomStep = this.options.zoomStep;\n    this.trigger(CHANGE, {\n      delta: direction * zoomStep\n    });\n  }\n\n  _click(e) {\n    let button = e.currentTarget;\n    let direction = 1;\n\n    if (hasClasses(button, 'k-zoom-out')) {\n      direction = -1;\n    }\n\n    this._change(direction);\n\n    e.preventDefault();\n  }\n  /* eslint-disable indent */\n\n\n  _keydown(e) {\n    switch (e.which) {\n      case keys.NUMPAD_PLUS:\n      case PLUS:\n      case FF_PLUS:\n        this._change(1);\n\n        break;\n\n      case keys.NUMPAD_MINUS:\n      case MINUS:\n      case FF_MINUS:\n        this._change(-1);\n\n        break;\n\n      default:\n        break;\n    }\n  }\n  /* eslint-enable indent */\n\n\n}\nsetDefaultOptions(ZoomControl, {\n  name: 'ZoomControl',\n  zoomStep: 1\n});\nsetDefaultEvents(ZoomControl, [CHANGE]);","map":null,"metadata":{},"sourceType":"module"}