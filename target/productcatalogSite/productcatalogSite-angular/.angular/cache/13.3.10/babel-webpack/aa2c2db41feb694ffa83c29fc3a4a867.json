{"ast":null,"code":"import BaseTooltip from '../tooltip/base-tooltip';\nimport { HIDE_TOOLTIP } from '../constants';\nimport { TOP, BOTTOM, LEFT, RIGHT, CENTER, DATE } from '../../common/constants';\nimport { setDefaultOptions } from '../../common';\n\nclass CrosshairTooltip extends BaseTooltip {\n  constructor(chartService, crosshair, options) {\n    super(chartService, options);\n    this.crosshair = crosshair;\n    this.formatService = chartService.format;\n    this.initAxisName();\n  }\n\n  initAxisName() {\n    const axis = this.crosshair.axis;\n    const plotArea = axis.plotArea;\n    let name;\n\n    if (plotArea.categoryAxis) {\n      name = axis.getCategory ? \"categoryAxis\" : \"valueAxis\";\n    } else {\n      name = axis.options.vertical ? \"yAxis\" : \"xAxis\";\n    }\n\n    this.axisName = name;\n  }\n\n  showAt(point) {\n    const {\n      crosshair: {\n        axis\n      },\n      options\n    } = this;\n    let value = axis[options.stickyMode ? \"getCategory\" : \"getValue\"](point);\n    let formattedValue = value;\n\n    if (options.format) {\n      formattedValue = this.formatService.auto(options.format, value);\n    } else if (axis.options.type === DATE) {\n      formattedValue = this.formatService.auto(axis.options.labels.dateFormats[axis.options.baseUnit], value);\n    }\n\n    this.show({\n      point: point,\n      anchor: this.getAnchor(),\n      crosshair: this.crosshair,\n      value: formattedValue,\n      axisName: this.axisName,\n      axisIndex: this.crosshair.axis.axisIndex\n    }, this.options);\n  }\n\n  hide() {\n    this.chartService.notify(HIDE_TOOLTIP, {\n      crosshair: this.crosshair,\n      axisName: this.axisName,\n      axisIndex: this.crosshair.axis.axisIndex\n    });\n  }\n\n  getAnchor() {\n    const {\n      crosshair,\n      options: {\n        position,\n        padding\n      }\n    } = this;\n    const vertical = !crosshair.axis.options.vertical;\n    const lineBox = crosshair.line.bbox();\n    let horizontalAlign, verticalAlign, point;\n\n    if (vertical) {\n      horizontalAlign = CENTER;\n\n      if (position === BOTTOM) {\n        verticalAlign = TOP;\n        point = lineBox.bottomLeft().translate(0, padding);\n      } else {\n        verticalAlign = BOTTOM;\n        point = lineBox.topLeft().translate(0, -padding);\n      }\n    } else {\n      verticalAlign = CENTER;\n\n      if (position === LEFT) {\n        horizontalAlign = RIGHT;\n        point = lineBox.topLeft().translate(-padding, 0);\n      } else {\n        horizontalAlign = LEFT;\n        point = lineBox.topRight().translate(padding, 0);\n      }\n    }\n\n    return {\n      point: point,\n      align: {\n        horizontal: horizontalAlign,\n        vertical: verticalAlign\n      }\n    };\n  }\n\n}\n\nsetDefaultOptions(CrosshairTooltip, {\n  padding: 10\n});\nexport default CrosshairTooltip;","map":null,"metadata":{},"sourceType":"module"}