{"ast":null,"code":"import { MIN_VALUE, MAX_VALUE } from '../../common/constants';\nimport { defined, isNumber } from '../../common';\nimport countNumbers from '../utils/count-numbers';\nconst Aggregates = {\n  min: function (values) {\n    const length = values.length;\n    let min = MAX_VALUE;\n\n    for (let i = 0; i < length; i++) {\n      const value = values[i];\n\n      if (isNumber(value)) {\n        min = Math.min(min, value);\n      }\n    }\n\n    return min === MAX_VALUE ? values[0] : min;\n  },\n  max: function (values) {\n    const length = values.length;\n    let max = MIN_VALUE;\n\n    for (let i = 0; i < length; i++) {\n      const value = values[i];\n\n      if (isNumber(value)) {\n        max = Math.max(max, value);\n      }\n    }\n\n    return max === MIN_VALUE ? values[0] : max;\n  },\n  sum: function (values) {\n    const length = values.length;\n    let sum = 0;\n\n    for (let i = 0; i < length; i++) {\n      const value = values[i];\n\n      if (isNumber(value)) {\n        sum += value;\n      }\n    }\n\n    return sum;\n  },\n  sumOrNull: function (values) {\n    let result = null;\n\n    if (countNumbers(values)) {\n      result = Aggregates.sum(values);\n    }\n\n    return result;\n  },\n  count: function (values) {\n    const length = values.length;\n    let count = 0;\n\n    for (let i = 0; i < length; i++) {\n      const value = values[i];\n\n      if (value !== null && defined(value)) {\n        count++;\n      }\n    }\n\n    return count;\n  },\n  avg: function (values) {\n    const count = countNumbers(values);\n    let result = values[0];\n\n    if (count > 0) {\n      result = Aggregates.sum(values) / count;\n    }\n\n    return result;\n  },\n  first: function (values) {\n    const length = values.length;\n\n    for (let i = 0; i < length; i++) {\n      const value = values[i];\n\n      if (value !== null && defined(value)) {\n        return value;\n      }\n    }\n\n    return values[0];\n  }\n};\nexport default Aggregates;","map":null,"metadata":{},"sourceType":"module"}