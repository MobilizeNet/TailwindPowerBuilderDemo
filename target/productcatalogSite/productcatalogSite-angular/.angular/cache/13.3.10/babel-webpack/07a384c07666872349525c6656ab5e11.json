{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { BaseModelFactory } from '../../Core/BaseModelFactory';\nimport { ErrorCodes, ExceptionHandlerClass } from '../../System/Aop';\nimport { ModelV5 } from './Model';\n\nvar ModelFactoryV5 = function (_super) {\n  __extends(ModelFactoryV5, _super);\n\n  function ModelFactoryV5() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  ModelFactoryV5_1 = ModelFactoryV5;\n\n  ModelFactoryV5.prototype.create = function (model) {\n    var current = this.getModelCtor(model['MapperId']);\n\n    if (current) {\n      var instance = new current();\n\n      if (instance.___init && instance.___setInitialValues) {\n        this.enableIsInitializingModelFlag(instance);\n\n        instance.___init(model.Id, model);\n\n        instance.___setInitialValues(model.id);\n\n        this.disableIsInitializingModelFlag(instance);\n        return instance;\n      }\n    }\n\n    return new ModelV5(model.Id, model);\n  };\n\n  ModelFactoryV5.prototype.enableIsInitializingModelFlag = function (model) {\n    if (model) {\n      model[ModelFactoryV5_1.isInitializingModel] = true;\n    }\n  };\n\n  ModelFactoryV5.prototype.disableIsInitializingModelFlag = function (model) {\n    if (model) {\n      delete model[ModelFactoryV5_1.isInitializingModel];\n    }\n  };\n\n  var ModelFactoryV5_1;\n  ModelFactoryV5.isInitializingModel = 'isInitializingModel';\n  ModelFactoryV5 = ModelFactoryV5_1 = __decorate([ExceptionHandlerClass(ErrorCodes.ClientCore)], ModelFactoryV5);\n  return ModelFactoryV5;\n}(BaseModelFactory);\n\nexport { ModelFactoryV5 }; //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTW9kZWxGYWN0b3J5LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3Y1L0NvcmUvTW9kZWxGYWN0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9CQSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUMvRCxPQUFPLEVBQUUsVUFBVSxFQUFFLHFCQUFxQixFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDckUsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLFNBQVMsQ0FBQztBQUdsQztJQUFvQyxrQ0FBZ0I7SUFBcEQ7O0lBbURBLENBQUM7dUJBbkRZLGNBQWM7SUFlekIsK0JBQU0sR0FBTixVQUFPLEtBQVU7UUFDZixJQUFNLE9BQU8sR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBQ3JELElBQUksT0FBTyxFQUFFO1lBQ1gsSUFBTSxRQUFRLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztZQUMvQixJQUFJLFFBQVEsQ0FBQyxPQUFPLElBQUksUUFBUSxDQUFDLG1CQUFtQixFQUFFO2dCQUNsRCxJQUFJLENBQUMsNkJBQTZCLENBQUMsUUFBUSxDQUFDLENBQUM7Z0JBQzdDLFFBQVEsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxLQUFLLENBQUMsQ0FBQztnQkFDbEMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDdkMsSUFBSSxDQUFDLDhCQUE4QixDQUFDLFFBQVEsQ0FBQyxDQUFDO2dCQUM5QyxPQUFPLFFBQVEsQ0FBQzthQUNqQjtTQUNKO1FBQ0QsT0FBTyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQ3RDLENBQUM7SUFPRCxzREFBNkIsR0FBN0IsVUFBOEIsS0FBVTtRQUN0QyxJQUFJLEtBQUssRUFBRTtZQUNULEtBQUssQ0FBQyxnQkFBYyxDQUFDLG1CQUFtQixDQUFDLEdBQUcsSUFBSSxDQUFDO1NBQ2xEO0lBQ0gsQ0FBQztJQU9ELHVEQUE4QixHQUE5QixVQUErQixLQUFVO1FBQ3ZDLElBQUksS0FBSyxFQUFFO1lBQ1QsT0FBTyxLQUFLLENBQUMsZ0JBQWMsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO1NBQ2xEO0lBQ0gsQ0FBQzs7SUExQ00sa0NBQW1CLEdBQUcscUJBQXFCLENBQUM7SUFSeEMsY0FBYztRQUQxQixxQkFBcUIsQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDO09BQ2hDLGNBQWMsQ0FtRDFCO0lBQUQscUJBQUM7Q0FBQSxBQW5ERCxDQUFvQyxnQkFBZ0IsR0FtRG5EO1NBbkRZLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICogQ29weXJpZ2h0IChDKSBNb2JpbGl6ZS5OZXQgPGluZm9AbW9iaWxpemUubmV0PiAtIEFsbCBSaWdodHMgUmVzZXJ2ZWRcclxuICpcclxuICogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIE1vYmlsaXplIEZyYW1ld29ya3MsIHdoaWNoIGlzXHJcbiAqIHByb3ByaWV0YXJ5IGFuZCBjb25maWRlbnRpYWwuXHJcbiAqXHJcbiAqIE5PVElDRTogIEFsbCBpbmZvcm1hdGlvbiBjb250YWluZWQgaGVyZWluIGlzLCBhbmQgcmVtYWluc1xyXG4gKiB0aGUgcHJvcGVydHkgb2YgTW9iaWxpemUuTmV0IENvcnBvcmF0aW9uLlxyXG4gKiBUaGUgaW50ZWxsZWN0dWFsIGFuZCB0ZWNobmljYWwgY29uY2VwdHMgY29udGFpbmVkIGhlcmVpbiBhcmVcclxuICogcHJvcHJpZXRhcnkgdG8gTW9iaWxpemUuTmV0IENvcnBvcmF0aW9uIGFuZCBtYXkgYmUgY292ZXJlZFxyXG4gKiBieSBVLlMuIFBhdGVudHMsIGFuZCBhcmUgcHJvdGVjdGVkIGJ5IHRyYWRlIHNlY3JldCBvciBjb3B5cmlnaHQgbGF3LlxyXG4gKiBEaXNzZW1pbmF0aW9uIG9mIHRoaXMgaW5mb3JtYXRpb24gb3IgcmVwcm9kdWN0aW9uIG9mIHRoaXMgbWF0ZXJpYWxcclxuICogaXMgc3RyaWN0bHkgZm9yYmlkZGVuIHVubGVzcyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24gaXMgb2J0YWluZWRcclxuICogZnJvbSBNb2JpbGl6ZS5OZXQgQ29ycG9yYXRpb24uXHJcbiAqXHJcbiAqIFRoaXMgZmlsZSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBhbmQgY29uZGl0aW9ucyBkZWZpbmVkIGluXHJcbiAqIGZpbGUgJ0xJQ0VOU0UudHh0Jywgd2hpY2ggaXMgcGFydCBvZiB0aGlzIHNvdXJjZSBjb2RlIHBhY2thZ2UuXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmltcG9ydCB7IElNb2RlbCwgSU1vZGVsRmFjdG9yeSB9IGZyb20gJy4uLy4uL0NvbnRyYWN0JztcclxuaW1wb3J0IHsgQmFzZU1vZGVsRmFjdG9yeSB9IGZyb20gJy4uLy4uL0NvcmUvQmFzZU1vZGVsRmFjdG9yeSc7XHJcbmltcG9ydCB7IEVycm9yQ29kZXMsIEV4Y2VwdGlvbkhhbmRsZXJDbGFzcyB9IGZyb20gJy4uLy4uL1N5c3RlbS9Bb3AnO1xyXG5pbXBvcnQgeyBNb2RlbFY1IH0gZnJvbSAnLi9Nb2RlbCc7XHJcblxyXG5ARXhjZXB0aW9uSGFuZGxlckNsYXNzKEVycm9yQ29kZXMuQ2xpZW50Q29yZSlcclxuZXhwb3J0IGNsYXNzIE1vZGVsRmFjdG9yeVY1IGV4dGVuZHMgQmFzZU1vZGVsRmFjdG9yeSBpbXBsZW1lbnRzIElNb2RlbEZhY3Rvcnkge1xyXG5cclxuICAvKipcclxuICAgKiBQcm9wZXJ0eSBuYW1lIGZvciB0aGUgaXMgaW5pdGlhbGl6aW5nIG1vZGVsIGZsYWcuXHJcbiAgICpcclxuICAgKiBAc3RhdGljXHJcbiAgICogQG1lbWJlcm9mIE1vZGVsRmFjdG9yeVY1XHJcbiAgICovXHJcbiAgc3RhdGljIGlzSW5pdGlhbGl6aW5nTW9kZWwgPSAnaXNJbml0aWFsaXppbmdNb2RlbCc7XHJcblxyXG4gIC8qKlxyXG4gICAqIENyZWF0ZXMgbW9kZWwgdjUgYWNjb3JkaW5nIHRoZSBpbmZvcm1hdGlvbi5cclxuICAgKiBAcGFyYW0gbW9kZWwgVGhlIG1vZGVsIHdpdGggdGhlIGluZm9ybWF0aW9uLlxyXG4gICAqIEByZXR1cm5zIFRoZSBuZXcgbW9kZWwuXHJcbiAgICovXHJcbiAgY3JlYXRlKG1vZGVsOiBhbnkpOiBJTW9kZWwge1xyXG4gICAgY29uc3QgY3VycmVudCA9IHRoaXMuZ2V0TW9kZWxDdG9yKG1vZGVsWydNYXBwZXJJZCddKTtcclxuICAgIGlmIChjdXJyZW50KSB7XHJcbiAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IGN1cnJlbnQoKTtcclxuICAgICAgaWYgKGluc3RhbmNlLl9fX2luaXQgJiYgaW5zdGFuY2UuX19fc2V0SW5pdGlhbFZhbHVlcykge1xyXG4gICAgICAgICAgdGhpcy5lbmFibGVJc0luaXRpYWxpemluZ01vZGVsRmxhZyhpbnN0YW5jZSk7XHJcbiAgICAgICAgICBpbnN0YW5jZS5fX19pbml0KG1vZGVsLklkLCBtb2RlbCk7XHJcbiAgICAgICAgICBpbnN0YW5jZS5fX19zZXRJbml0aWFsVmFsdWVzKG1vZGVsLmlkKTtcclxuICAgICAgICAgIHRoaXMuZGlzYWJsZUlzSW5pdGlhbGl6aW5nTW9kZWxGbGFnKGluc3RhbmNlKTtcclxuICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IE1vZGVsVjUobW9kZWwuSWQsIG1vZGVsKTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVuYWJsZXMgdGhlIGlzSW5pdGlhbGl6aW5nTW9kZWwgZmxhZy5cclxuICAgKlxyXG4gICAqIEBtZW1iZXJvZiBNb2RlbEZhY3RvcnlWNVxyXG4gICAqL1xyXG4gIGVuYWJsZUlzSW5pdGlhbGl6aW5nTW9kZWxGbGFnKG1vZGVsOiBhbnkpOiB2b2lkIHtcclxuICAgIGlmIChtb2RlbCkge1xyXG4gICAgICBtb2RlbFtNb2RlbEZhY3RvcnlWNS5pc0luaXRpYWxpemluZ01vZGVsXSA9IHRydWU7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEaXNhYmxlcyB0aGUgaXNJbml0aWFsaXppbmdNb2RlbCBmbGFnLlxyXG4gICAqXHJcbiAgICogQG1lbWJlcm9mIE1vZGVsRmFjdG9yeVY1XHJcbiAgICovXHJcbiAgZGlzYWJsZUlzSW5pdGlhbGl6aW5nTW9kZWxGbGFnKG1vZGVsOiBhbnkpOiB2b2lkIHtcclxuICAgIGlmIChtb2RlbCkge1xyXG4gICAgICBkZWxldGUgbW9kZWxbTW9kZWxGYWN0b3J5VjUuaXNJbml0aWFsaXppbmdNb2RlbF07XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdfQ==","map":null,"metadata":{},"sourceType":"module"}