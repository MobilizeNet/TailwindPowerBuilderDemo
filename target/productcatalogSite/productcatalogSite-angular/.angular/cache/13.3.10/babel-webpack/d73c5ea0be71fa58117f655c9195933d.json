{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nimport { Inject } from '../../Application';\nimport { Constants, Order } from '../../Contract';\nimport { ErrorCodes, ExceptionHandlerClass } from '../../System/Aop';\n\nvar ModalVisibilityManagementBehavior = function () {\n  function ModalVisibilityManagementBehavior(inject) {\n    if (inject === void 0) {\n      inject = null;\n    }\n\n    this.inject = inject;\n    this.inject = inject || Inject.Instance;\n    this.eventAggregator = this.inject.resolve(Constants.EventAggregator);\n  }\n\n  ModalVisibilityManagementBehavior.prototype.apply = function (model, root) {\n    var _this = this;\n\n    if (model.IsModalView) {\n      model.onPropertyChange = function (property, oldValue, newValue) {\n        if (property === 'visible' && oldValue !== newValue) {\n          if (newValue === true) {\n            _this.eventAggregator.publish('navigateToView', model);\n          } else {\n            _this.eventAggregator.publish('disposeView', model);\n          }\n        }\n      };\n    }\n  };\n\n  Object.defineProperty(ModalVisibilityManagementBehavior.prototype, \"Order\", {\n    get: function () {\n      return Order.POST;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  ModalVisibilityManagementBehavior = __decorate([ExceptionHandlerClass(ErrorCodes.ClientCore), __metadata(\"design:paramtypes\", [Object])], ModalVisibilityManagementBehavior);\n  return ModalVisibilityManagementBehavior;\n}();\n\nexport { ModalVisibilityManagementBehavior }; //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTW9kYWxWaXNpYmlsaXR5TWFuYWdlbWVudEJlaGF2aW9yLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL0NvcmUvQmVoYXZpb3JzL01vZGFsVmlzaWJpbGl0eU1hbmFnZW1lbnRCZWhhdmlvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFrQkEsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQzNDLE9BQU8sRUFBRSxTQUFTLEVBQTZFLEtBQUssRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQzdILE9BQU8sRUFBRSxVQUFVLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUdyRTtJQUVJLDJDQUFvQixNQUFzQjtRQUF0Qix1QkFBQSxFQUFBLGFBQXNCO1FBQXRCLFdBQU0sR0FBTixNQUFNLENBQWdCO1FBQ3RDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDeEMsSUFBSSxDQUFDLGVBQWUsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsZUFBZSxDQUFDLENBQUM7SUFDMUUsQ0FBQztJQUtELGlEQUFLLEdBQUwsVUFBTSxLQUFhLEVBQUUsSUFBYTtRQUFsQyxpQkFZQztRQVhHLElBQUksS0FBSyxDQUFDLFdBQVcsRUFBRTtZQUNuQixLQUFLLENBQUMsZ0JBQWdCLEdBQUcsVUFBQyxRQUFnQixFQUFFLFFBQWEsRUFBRSxRQUFhO2dCQUNwRSxJQUFJLFFBQVEsS0FBSyxTQUFTLElBQUksUUFBUSxLQUFLLFFBQVEsRUFBRTtvQkFDakQsSUFBSSxRQUFRLEtBQUssSUFBSSxFQUFFO3dCQUNuQixLQUFJLENBQUMsZUFBZSxDQUFDLE9BQU8sQ0FBQyxnQkFBZ0IsRUFBRSxLQUFLLENBQUMsQ0FBQztxQkFDekQ7eUJBQU07d0JBQ0gsS0FBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLENBQUMsYUFBYSxFQUFFLEtBQUssQ0FBQyxDQUFDO3FCQUN0RDtpQkFDSjtZQUNMLENBQUMsQ0FBQztTQUNMO0lBQ0wsQ0FBQztJQUVELHNCQUFJLG9EQUFLO2FBQVQ7WUFDSSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDdEIsQ0FBQzs7O09BQUE7SUExQlEsaUNBQWlDO1FBRDdDLHFCQUFxQixDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUM7O09BQ2hDLGlDQUFpQyxDQTJCN0M7SUFBRCx3Q0FBQztDQUFBLEFBM0JELElBMkJDO1NBM0JZLGlDQUFpQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4qIENvcHlyaWdodCAoQykgTW9iaWxpemUuTmV0IDxpbmZvQG1vYmlsaXplLm5ldD4gLSBBbGwgUmlnaHRzIFJlc2VydmVkXHJcbipcclxuKiBUaGlzIGZpbGUgaXMgcGFydCBvZiB0aGUgTW9iaWxpemUgRnJhbWV3b3Jrcywgd2hpY2ggaXNcclxuKiBwcm9wcmlldGFyeSBhbmQgY29uZmlkZW50aWFsLlxyXG4qXHJcbiogTk9USUNFOiAgQWxsIGluZm9ybWF0aW9uIGNvbnRhaW5lZCBoZXJlaW4gaXMsIGFuZCByZW1haW5zXHJcbiogdGhlIHByb3BlcnR5IG9mIE1vYmlsaXplLk5ldCBDb3Jwb3JhdGlvbi5cclxuKiBUaGUgaW50ZWxsZWN0dWFsIGFuZCB0ZWNobmljYWwgY29uY2VwdHMgY29udGFpbmVkIGhlcmVpbiBhcmVcclxuKiBwcm9wcmlldGFyeSB0byBNb2JpbGl6ZS5OZXQgQ29ycG9yYXRpb24gYW5kIG1heSBiZSBjb3ZlcmVkXHJcbiogYnkgVS5TLiBQYXRlbnRzLCBhbmQgYXJlIHByb3RlY3RlZCBieSB0cmFkZSBzZWNyZXQgb3IgY29weXJpZ2h0IGxhdy5cclxuKiBEaXNzZW1pbmF0aW9uIG9mIHRoaXMgaW5mb3JtYXRpb24gb3IgcmVwcm9kdWN0aW9uIG9mIHRoaXMgbWF0ZXJpYWxcclxuKiBpcyBzdHJpY3RseSBmb3JiaWRkZW4gdW5sZXNzIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbiBpcyBvYnRhaW5lZFxyXG4qIGZyb20gTW9iaWxpemUuTmV0IENvcnBvcmF0aW9uLlxyXG4qXHJcbiogVGhpcyBmaWxlIGlzIHN1YmplY3QgdG8gdGhlIHRlcm1zIGFuZCBjb25kaXRpb25zIGRlZmluZWQgaW5cclxuKiBmaWxlICdMSUNFTlNFLnR4dCcsIHdoaWNoIGlzIHBhcnQgb2YgdGhpcyBzb3VyY2UgY29kZSBwYWNrYWdlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuaW1wb3J0IHsgSW5qZWN0IH0gZnJvbSAnLi4vLi4vQXBwbGljYXRpb24nO1xyXG5pbXBvcnQgeyBDb25zdGFudHMsIElDbGllbnRCZWhhdmlvciwgSUVudGl0eSwgSUV2ZW50QWdncmVnYXRvciwgSUluamVjdCwgSU1vZGVsLCBJVHlwZVNlcnZpY2UsIE9yZGVyIH0gZnJvbSAnLi4vLi4vQ29udHJhY3QnO1xyXG5pbXBvcnQgeyBFcnJvckNvZGVzLCBFeGNlcHRpb25IYW5kbGVyQ2xhc3MgfSBmcm9tICcuLi8uLi9TeXN0ZW0vQW9wJztcclxuXHJcbkBFeGNlcHRpb25IYW5kbGVyQ2xhc3MoRXJyb3JDb2Rlcy5DbGllbnRDb3JlKVxyXG5leHBvcnQgY2xhc3MgTW9kYWxWaXNpYmlsaXR5TWFuYWdlbWVudEJlaGF2aW9yIGltcGxlbWVudHMgSUNsaWVudEJlaGF2aW9yIHtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGluamVjdDogSUluamVjdCA9IG51bGwpIHtcclxuICAgICAgICB0aGlzLmluamVjdCA9IGluamVjdCB8fCBJbmplY3QuSW5zdGFuY2U7XHJcbiAgICAgICAgdGhpcy5ldmVudEFnZ3JlZ2F0b3IgPSB0aGlzLmluamVjdC5yZXNvbHZlKENvbnN0YW50cy5FdmVudEFnZ3JlZ2F0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWxpYXNTZXJ2aWNlOiBJVHlwZVNlcnZpY2U7XHJcbiAgICBwcml2YXRlIGV2ZW50QWdncmVnYXRvcjogSUV2ZW50QWdncmVnYXRvcjtcclxuXHJcbiAgICBhcHBseShtb2RlbDogSU1vZGVsLCByb290OiBJRW50aXR5KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKG1vZGVsLklzTW9kYWxWaWV3KSB7XHJcbiAgICAgICAgICAgIG1vZGVsLm9uUHJvcGVydHlDaGFuZ2UgPSAocHJvcGVydHk6IHN0cmluZywgb2xkVmFsdWU6IGFueSwgbmV3VmFsdWU6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnR5ID09PSAndmlzaWJsZScgJiYgb2xkVmFsdWUgIT09IG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRBZ2dyZWdhdG9yLnB1Ymxpc2goJ25hdmlnYXRlVG9WaWV3JywgbW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRBZ2dyZWdhdG9yLnB1Ymxpc2goJ2Rpc3Bvc2VWaWV3JywgbW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IE9yZGVyKCk6IE9yZGVyIHtcclxuICAgICAgICByZXR1cm4gT3JkZXIuUE9TVDtcclxuICAgIH1cclxufVxyXG4iXX0=","map":null,"metadata":{},"sourceType":"module"}