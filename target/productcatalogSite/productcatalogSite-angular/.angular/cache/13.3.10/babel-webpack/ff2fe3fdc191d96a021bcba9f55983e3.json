{"ast":null,"code":"var __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nvar __metadata = this && this.__metadata || function (k, v) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nimport { ActionModel, Dictionary, Inject } from '../Application';\nimport { Constants, Events, RequestType } from '../Contract';\nimport { RequestConfig } from '../Server';\nimport { ErrorCodes, ExceptionHandlerClass } from '../System/Aop';\nimport { Commands } from './Command';\nimport { WindowType } from './Command/WindowType';\n\nvar ViewManager = function () {\n  function ViewManager(inject) {\n    if (inject === void 0) {\n      inject = null;\n    }\n\n    this.inject = inject || Inject.Instance;\n    this.viewResolver = this.inject.resolve(Constants.ViewResolver);\n    this.views = new Dictionary();\n    this.pendingViews = new Dictionary();\n    this.commands = new Dictionary();\n    this.action = this.inject.resolve(Constants.Action);\n    this.modalFactory = this.inject.resolve(Constants.ModalFactory);\n    this.event = this.inject.resolve(Constants.EventAggregator);\n    this.initializeCommand();\n  }\n\n  ViewManager.prototype.createView = function (model, items, views) {\n    var _this = this;\n\n    if (items && views) {\n      this.viewResolver.resolve(model, function (view) {\n        views.push(view);\n\n        _this.viewCreated(view);\n\n        if (views.length === items.length) {\n          items.forEach(function (c) {\n            return views.filter(function (d) {\n              return d.model.UniqueID === c;\n            }).forEach(function (v) {\n              return _this.viewLoad(v, views);\n            });\n          });\n        }\n      });\n    } else {\n      this.viewResolver.resolve(model, function (view) {\n        return _this.viewCreated(view);\n      });\n    }\n  };\n\n  ViewManager.prototype.viewLoad = function (view, views) {\n    if (view.isPendingLoad(view, views)) {\n      this.pendingViews.add(view.model.UniqueID, view);\n    } else {\n      view.load();\n    }\n  };\n\n  ViewManager.prototype.removePendingView = function (viewId) {\n    var view = this.pendingViews.value(viewId);\n\n    if (view) {\n      this.pendingViews.remove(viewId);\n    }\n  };\n\n  ViewManager.prototype.getPendingViews = function () {\n    return this.pendingViews;\n  };\n\n  ViewManager.prototype.viewCreated = function (view) {\n    this.views.add(view.model.UniqueID, view);\n  };\n\n  ViewManager.prototype.deleteView = function (viewId) {\n    var view = this.views.value(viewId);\n\n    if (view) {\n      view.close();\n      this.views.remove(viewId);\n    }\n  };\n\n  ViewManager.prototype.setTopView = function (viewId) {\n    var view = this.views.value(viewId);\n\n    if (view) {\n      view.focus();\n    }\n  };\n\n  ViewManager.prototype.getView = function (model) {\n    var uniqueId = model.UniqueID;\n    return this.views.value(uniqueId);\n  };\n\n  ViewManager.prototype.removeViews = function (data) {\n    if (data.RemovedViews) {\n      for (var _i = 0, _a = data.RemovedViews; _i < _a.length; _i++) {\n        var removed = _a[_i];\n        this.deleteView(removed);\n      }\n    }\n  };\n\n  ViewManager.prototype.execute = function (command) {\n    if (this.commands.value(command.name)) {\n      this.commands.value(command.name)(command);\n    }\n  };\n\n  ViewManager.prototype.hasCommand = function (command) {\n    return command && this.commands && this.commands.containsKey(command.name);\n  };\n\n  ViewManager.prototype.registerCommand = function (name, fn) {\n    this.commands.add(name, fn);\n  };\n\n  ViewManager.prototype.registerModal = function (modal) {\n    this.modalFactory.register(modal);\n  };\n\n  ViewManager.prototype.init = function (views, models) {\n    this.models = models;\n    this.loadFirstViews(views);\n  };\n\n  ViewManager.prototype.loadFirstViews = function (views) {\n    if (views && views.LoadedViews) {\n      var orderViews = [];\n\n      for (var _i = 0, _a = views.LoadedViews; _i < _a.length; _i++) {\n        var current = _a[_i];\n        var model = this.models.getModel(current.UniqueID);\n\n        if (this.isModalView(current.UniqueID, views.ModalViews)) {\n          model.IsModalView = true;\n        }\n\n        this.createView(model, views.LoadedViews.map(function (c) {\n          return c.UniqueID;\n        }), orderViews);\n      }\n    }\n  };\n\n  ViewManager.prototype.loadDeltas = function (viewDeltas) {\n    this.removeViews(viewDeltas);\n    this.loadNewViews(viewDeltas.NewViews, viewDeltas.ModalViews);\n    this.setFocus(viewDeltas.CurrentFocusedControl);\n    this.setTopView(viewDeltas.NewTopView);\n  };\n\n  ViewManager.prototype.createViews = function (viewIds) {\n    throw new Error('WebMap 5 function not implemented in WebMap 4');\n  };\n\n  ViewManager.prototype.updateViews = function (viewIds) {\n    throw new Error('WebMap 5 function not implemented in WebMap 4');\n  };\n\n  ViewManager.prototype.startEditControlHandler = function (command) {\n    var control = this.models.getModel(command.myControlId);\n\n    if (control) {\n      control.startEditing = true;\n    }\n  };\n\n  ViewManager.prototype.initializeCommand = function () {\n    var _this = this;\n\n    this.registerCommand(Commands.CloseCommand, function (command) {\n      return _this.closeHandler(command);\n    });\n    this.registerCommand(Commands.ClientCloseCommand, function (command) {\n      return _this.clientCloseHandler(command);\n    });\n    this.registerCommand(Commands.SendCommand, function (command) {\n      return _this.sendHandler(command);\n    });\n    this.registerCommand(Commands.InputBoxActionCommand, function (command) {\n      return _this.inputBoxActionHandler(command);\n    });\n    this.registerCommand(Commands.ModalCommand, function (command) {\n      return _this.modalHandler(command);\n    });\n    this.registerCommand(Commands.ModalActionCommand, function (command) {\n      return _this.modalActionHandler(command);\n    });\n    this.registerCommand(Commands.ModalActionButtonCommand, function (command) {\n      return _this.modalActionButtonHandler(command);\n    });\n    this.registerCommand(Commands.KeyPressCommand, function (command) {\n      return _this.keyPressHandler(command);\n    });\n    this.registerCommand(Commands.PrintActionCommand, function (command) {\n      return _this.printActionHandler(command);\n    });\n    this.registerCommand(Commands.MessageBox, function (command) {\n      return _this.messageBoxHandler(command);\n    });\n    this.registerCommand(Commands.MsgBox, function (command) {\n      return _this.msgBoxHandler(command);\n    });\n    this.registerCommand(Commands.OpenView, function (command) {\n      return _this.openViewHandler(command);\n    });\n    this.registerCommand(Commands.CloseView, function (command) {\n      return _this.closeViewHandler(command);\n    });\n    this.registerCommand(Commands.InputBox, function (command) {\n      return _this.inputBoxHandler(command);\n    });\n    this.registerCommand(Commands.ChangeFocusControlCommand, function (command) {\n      return _this.changefocusControlHandler(command);\n    });\n    this.registerCommand(Commands.StartEditCommand, function (command) {\n      return _this.startEditControlHandler(command);\n    });\n    this.registerCommand(Commands.ChangeMenuCommand, function (command) {\n      return _this.changeMenuHandler(command);\n    });\n    this.registerCommand(Commands.ChangeMenuStateCommand, function (command) {\n      return _this.changeMenuStateHandler(command);\n    });\n    this.registerCommand(Commands.ChangeStatusCommand, function (command) {\n      return _this.changeStatusHandler(command);\n    });\n    this.registerCommand(Commands.FileExplorer, function (command) {\n      return _this.fileExplorerHandler(command);\n    });\n    this.registerCommand(Commands.FileExplorerInput, function (command) {\n      return _this.fileExplorerHandler(command);\n    });\n    this.registerCommand(Commands.RefreshApplicationMenu, function (command) {\n      return _this.refreshApplicationMenuHandler(command);\n    });\n    this.registerCommand(Commands.QuitCurrentApplication, function (command) {\n      return _this.quitCurrentApplication(command);\n    });\n    this.registerCommand(Commands.PrintScreenCommand, function (command) {\n      return _this.printScreenHandler(command);\n    });\n    this.registerCommand(Commands.ContextMenuCommand, function (command) {\n      return _this.contextMenuHandler(command);\n    });\n    this.registerCommand(Commands.DisposeWindowCommand, function (command) {\n      return _this.diposeWindowHandler(command);\n    });\n    this.registerCommand(Commands.SetTextToDataManagerCommand, function (command) {\n      return _this.setTextToDataManagerHandler(command);\n    });\n    this.registerCommand(Commands.CloseWindowByTimerCommand, function (command) {\n      return _this.closeWindowByTimerHandler(command);\n    });\n    this.registerCommand(Commands.ServerVersionCommand, function (command) {\n      return _this.registerVersion(command);\n    });\n    this.registerCommand(Commands.ArrangeWindowCommand, function (command) {\n      return _this.arrangeWindowHandler(command);\n    });\n    this.registerCommand(Commands.PopMenuCommand, function (command) {\n      return _this.popMenuHandler(command);\n    });\n    this.registerCommand(Commands.OpenExternalLinkCommand, function (command) {\n      return _this.openExternalLinkHandler(command);\n    });\n\n    if (this.onRegisterCommand) {\n      this.onRegisterCommand();\n    }\n  };\n\n  ViewManager.prototype.diposeWindowHandler = function (disposeWindow) {\n    var modelResolver = this.inject.resolve(Constants.ModelResolver);\n    modelResolver.resolveRemoved([disposeWindow.windowId]);\n    this.event.publish('disposeView', disposeWindow.windowId);\n  };\n\n  ViewManager.prototype.changeMenuStateHandler = function (command) {\n    var parent = this.models.getModel(command.parentWindow);\n    var toolBarVisible = command.toolBarVisible;\n    parent = parent.ParentWindow ? this.models.getModel(parent.ParentWindow) : parent;\n\n    if (parent.Menu) {\n      parent.toolbarVisibleInternal = toolBarVisible;\n    }\n  };\n\n  ViewManager.prototype.changeMenuHandler = function (command) {\n    var parent = this.models.getModel(command.parentWindow);\n    var menu = parent && !parent.Menu ? parent.MenuID : this.models.getModel(command.newMenuId);\n    var toolbarframetitle = command.toolBarFrameTitle;\n    var toolbarsheettitle = command.toolBarSheetTitle;\n\n    if (parent && menu) {\n      menu.ToolbarVisible = parent.ToolbarVisible;\n      menu.ToolBarFrameTitle = toolbarframetitle;\n      menu.ToolBarSheetTitle = toolbarsheettitle;\n\n      if (parent.WindowType === WindowType.mdi || parent.WindowType === WindowType.mdihelp || !parent.ParentWindow) {\n        parent.Menu = menu;\n      } else {\n        menu.isChild = true;\n        parent.ParentWindow.Menu = menu;\n      }\n\n      menu.Refresh = true;\n    }\n  };\n\n  ViewManager.prototype.setTextToDataManagerHandler = function (command) {\n    this.event.publish(Events.SetDMText, command);\n  };\n\n  ViewManager.prototype.arrangeWindowHandler = function (command) {\n    this.event.publish(Events.ArrangeWindow, command);\n  };\n\n  ViewManager.prototype.fileExplorerHandler = function (command) {\n    var modal = this.modalFactory.create(command.ModalName);\n    modal.show(command);\n  };\n\n  ViewManager.prototype.changeStatusHandler = function (command) {\n    var menu = this.models.getModel(command.MDIId);\n\n    if (menu) {\n      menu.MicroHelp = command.message;\n    }\n  };\n\n  ViewManager.prototype.setFocus = function (control) {\n    if (control) {\n      var model = this.models.search(control);\n\n      if (model) {\n        model.applyMethod('focus');\n      }\n    }\n  };\n\n  ViewManager.prototype.loadNewViews = function (newViews, modalViews) {\n    if (newViews) {\n      var orderViews = [];\n\n      for (var _i = 0, newViews_1 = newViews; _i < newViews_1.length; _i++) {\n        var item = newViews_1[_i];\n        var model = this.models.getModel(item);\n\n        if (this.isModalView(item, modalViews)) {\n          model.IsModalView = true;\n        }\n\n        this.createView(model, newViews, orderViews);\n      }\n    }\n  };\n\n  ViewManager.prototype.isModalView = function (viewId, modalViews) {\n    return modalViews && modalViews.indexOf(viewId) > -1;\n  };\n\n  ViewManager.prototype.inputBoxHandler = function (command) {\n    var modal = this.modalFactory.create(command.name);\n    modal.show(command);\n  };\n\n  ViewManager.prototype.messageBoxHandler = function (command) {\n    var modal = this.modalFactory.create('msg');\n    modal.show(command);\n  };\n\n  ViewManager.prototype.msgBoxHandler = function (command) {\n    var modal = this.modalFactory.create(command.name);\n    modal.show(command);\n  };\n\n  ViewManager.prototype.openViewHandler = function (command) {\n    var model = this.models.getModel(command.UniqueID);\n    this.createView(model);\n  };\n\n  ViewManager.prototype.closeViewHandler = function (command) {\n    this.deleteView(command.UniqueID);\n    this.models.deleteCascade(command.UniqueID);\n  };\n\n  ViewManager.prototype.closeHandler = function (command) {\n    this.action.send(new ActionModel(command.sender.name, command.action, command.sender.model));\n  };\n\n  ViewManager.prototype.clientCloseHandler = function (command) {\n    this.action.send(new ActionModel(command.controller, command.action, undefined, command.args));\n  };\n\n  ViewManager.prototype.sendHandler = function (command) {\n    this.action.send(new ActionModel(command.sender.name, command.action, command.sender.model, command.args, command.callback, null, command.highPriority));\n  };\n\n  ViewManager.prototype.modalHandler = function (command) {\n    var modal = this.modalFactory.create(command.modalName());\n\n    if (modal) {\n      modal.show(command.parameters());\n    }\n  };\n\n  ViewManager.prototype.printActionHandler = function (command) {\n    this.sendPrintActionHandler(command);\n  };\n\n  ViewManager.prototype.sendPrintActionHandler = function (command) {\n    this.action.send(new ActionModel(command.controller, command.action, null, {\n      dialogResult: command.dialogResult,\n      parameters: command.args\n    }, undefined, new RequestConfig(RequestType.RawRequest)));\n  };\n\n  ViewManager.prototype.modalActionHandler = function (command) {\n    this.sendActionHandler(command, 'ResumeOperation');\n  };\n\n  ViewManager.prototype.modalActionButtonHandler = function (command) {\n    this.sendActionButtonHandler(command, 'ResumeOperation');\n  };\n\n  ViewManager.prototype.inputBoxActionHandler = function (command) {\n    this.sendActionHandler(command, 'WebMapViewManager');\n  };\n\n  ViewManager.prototype.changefocusControlHandler = function (command) {\n    var control = this.models.getModel(command.myControlId);\n\n    if (this.lastFocusedControl) {\n      this.lastFocusedControl.isFocused = false;\n    }\n\n    if (control) {\n      this.lastFocusedControl = control;\n      control.isFocused = true;\n    }\n  };\n\n  ViewManager.prototype.refreshApplicationMenuHandler = function (command) {\n    var menu = this.models.getModel(command.menuId);\n\n    if (menu) {\n      menu.Refresh = true;\n    }\n  };\n\n  ViewManager.prototype.sendActionHandler = function (command, controller) {\n    this.action.send(new ActionModel(controller, 'ResumePendingOperation', null, {\n      dialogResult: command.dialogResult,\n      requestedInput: command.requestedInput\n    }, undefined, new RequestConfig(RequestType.RawRequest)));\n  };\n\n  ViewManager.prototype.sendActionButtonHandler = function (command, controller) {\n    this.action.send(new ActionModel(controller, 'ResumePendingOperation', null, {\n      buttons: command.buttons\n    }, undefined, new RequestConfig(RequestType.RawRequest)));\n  };\n\n  ViewManager.prototype.keyPressHandler = function (command) {\n    this.action.send(new ActionModel(command.sender.name, command.action, command.sender.model, new Array({\n      keyCode: command.key\n    })));\n  };\n\n  ViewManager.prototype.quitCurrentApplication = function (command) {\n    this.event.publish(Events.ApplicationRestart);\n  };\n\n  ViewManager.prototype.printScreenHandler = function (command) {\n    window.print();\n  };\n\n  ViewManager.prototype.contextMenuHandler = function (command) {\n    var subMenu = this.models.getModel(command.subMenu);\n    var window = this.models.getModel(command.window);\n\n    if (subMenu && window) {\n      subMenu.Refresh = true;\n      window.ContextMenu = subMenu;\n    }\n  };\n\n  ViewManager.prototype.openExternalLinkHandler = function (command) {\n    window.open(command.path, '_blank');\n  };\n\n  ViewManager.prototype.closeWindowByTimerHandler = function (command) {\n    var model = this.models.getModel(command.windowId);\n    model.closeByTime = command.miliSeconds;\n  };\n\n  ViewManager.prototype.popMenuHandler = function (command) {\n    var model = this.models.getModel(command.windowId);\n\n    if (model) {\n      model.popMenu = command.subMenuId;\n    }\n  };\n\n  ViewManager.prototype.registerVersion = function (command) {\n    var version = window.app.version;\n    version.dcpVersion = command.dcpVersion;\n    version.coreVersion = command.coreVersion;\n  };\n\n  ViewManager = __decorate([ExceptionHandlerClass(ErrorCodes.ClientCore), __metadata(\"design:paramtypes\", [Object])], ViewManager);\n  return ViewManager;\n}();\n\nexport { ViewManager }; //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlld01hbmFnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvVUkvVmlld01hbmFnZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBbUJBLE9BQU8sRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBQ2pFLE9BQU8sRUFDSCxTQUFTLEVBQUUsTUFBTSxFQUNxRSxXQUFXLEVBQ3BHLE1BQU0sYUFBYSxDQUFDO0FBQ3JCLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxXQUFXLENBQUM7QUFDMUMsT0FBTyxFQUFFLFVBQVUsRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVsRSxPQUFPLEVBRTBFLFFBQVEsRUFHeEYsTUFBTSxXQUFXLENBQUM7QUFPbkIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBR2xEO0lBQ0kscUJBQVksTUFBc0I7UUFBdEIsdUJBQUEsRUFBQSxhQUFzQjtRQUM5QixJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDO1FBQ3hDLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQ2hFLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxVQUFVLEVBQUUsQ0FBQztRQUM5QixJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksVUFBVSxFQUFFLENBQUM7UUFDckMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLFVBQVUsRUFBRSxDQUFDO1FBQ2pDLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3BELElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFD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Q0F1YXZCO0lBQUQsa0JBQUM7Q0FBQSxBQXZhRCxJQXVhQztTQXZhWSxXQUFXIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiogQ29weXJpZ2h0IChDKSBNb2JpbGl6ZS5OZXQgPGluZm9AbW9iaWxpemUubmV0PiAtIEFsbCBSaWdodHMgUmVzZXJ2ZWRcclxuKlxyXG4qIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIHRoZSBNb2JpbGl6ZSBGcmFtZXdvcmtzLCB3aGljaCBpc1xyXG4qIHByb3ByaWV0YXJ5IGFuZCBjb25maWRlbnRpYWwuXHJcbipcclxuKiBOT1RJQ0U6ICBBbGwgaW5mb3JtYXRpb24gY29udGFpbmVkIGhlcmVpbiBpcywgYW5kIHJlbWFpbnNcclxuKiB0aGUgcHJvcGVydHkgb2YgTW9iaWxpemUuTmV0IENvcnBvcmF0aW9uLlxyXG4qIFRoZSBpbnRlbGxlY3R1YWwgYW5kIHRlY2huaWNhbCBjb25jZXB0cyBjb250YWluZWQgaGVyZWluIGFyZVxyXG4qIHByb3ByaWV0YXJ5IHRvIE1vYmlsaXplLk5ldCBDb3Jwb3JhdGlvbiBhbmQgbWF5IGJlIGNvdmVyZWRcclxuKiBieSBVLlMuIFBhdGVudHMsIGFuZCBhcmUgcHJvdGVjdGVkIGJ5IHRyYWRlIHNlY3JldCBvciBjb3B5cmlnaHQgbGF3LlxyXG4qIERpc3NlbWluYXRpb24gb2YgdGhpcyBpbmZvcm1hdGlvbiBvciByZXByb2R1Y3Rpb24gb2YgdGhpcyBtYXRlcmlhbFxyXG4qIGlzIHN0cmljdGx5IGZvcmJpZGRlbiB1bmxlc3MgcHJpb3Igd3JpdHRlbiBwZXJtaXNzaW9uIGlzIG9idGFpbmVkXHJcbiogZnJvbSBNb2JpbGl6ZS5OZXQgQ29ycG9yYXRpb24uXHJcbipcclxuKiBUaGlzIGZpbGUgaXMgc3ViamVjdCB0byB0aGUgdGVybXMgYW5kIGNvbmRpdGlvbnMgZGVmaW5lZCBpblxyXG4qIGZpbGUgJ0xJQ0VOU0UudHh0Jywgd2hpY2ggaXMgcGFydCBvZiB0aGlzIHNvdXJjZSBjb2RlIHBhY2thZ2UuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuaW1wb3J0IHsgQWN0aW9uTW9kZWwsIERpY3Rpb25hcnksIEluamVjdCB9IGZyb20gJy4uL0FwcGxpY2F0aW9uJztcclxuaW1wb3J0IHtcclxuICAgIENvbnN0YW50cywgRXZlbnRzLCBJQWN0aW9uLCBJQ29tbWFuZCwgSURpY3Rpb25hcnksIElFbnRpdHksIElFdmVudEFnZ3JlZ2F0b3IsXHJcbiAgICBJSW5qZWN0LCBJTW9kYWwsIElNb2RhbEZhY3RvcnksIElNb2RlbCwgSVZlcnNpb24sIElWaWV3LCBJVmlld01hbmFnZXIsIElWaWV3UmVzb2x2ZXIsIFJlcXVlc3RUeXBlXHJcbn0gZnJvbSAnLi4vQ29udHJhY3QnO1xyXG5pbXBvcnQgeyBSZXF1ZXN0Q29uZmlnIH0gZnJvbSAnLi4vU2VydmVyJztcclxuaW1wb3J0IHsgRXJyb3JDb2RlcywgRXhjZXB0aW9uSGFuZGxlckNsYXNzIH0gZnJvbSAnLi4vU3lzdGVtL0FvcCc7XHJcblxyXG5pbXBvcnQge1xyXG4gICAgQXJyYW5nZVdpbmRvd0NvbW1hbmQsXHJcbiAgICBDaGFuZ2VGb2N1c0NvbnRyb2wsIENoYW5nZU1lbnUsIENoYW5nZVN0YXR1cywgQ2xpZW50Q2xvc2UsIENsb3NlLCBDbG9zZVZpZXcsIENvbW1hbmRzLCBDb250ZXh0TWVudSwgRmlsZUV4cGxvcmVyUmVtb3RlLFxyXG4gICAgRmlsZUV4cGxvcmVyUmVtb3RlSW5wdXQsIElucHV0Qm94LCBJbnB1dEJveEFjdGlvbiwgS2V5UHJlc3MsIE1lc3NhZ2VCb3gsIE1vZGFsQWN0aW9uLCBNb2RhbEFjdGlvbkJ1dHRvbiwgTW9kYWxDb21tYW5kLCBNc2dCb3gsIE9wZW5WaWV3LFxyXG4gICAgUG9wTWVudSwgUHJpbnRTY3JlZW4sIFF1aXRDdXJyZW50QXBwbGljYXRpb24sIFJlZnJlc2hBcHBsaWNhdGlvbk1lbnUsIFNlbmQsIFNlcnZlclZlcnNpb25Db21tYW5kLCBTdGFydEVkaXRcclxufSBmcm9tICcuL0NvbW1hbmQnO1xyXG5pbXBvcnQgeyBDaGFuZ2VNZW51U3RhdGUgfSBmcm9tICcuL0NvbW1hbmQvQ2hhbmdlTWVudVN0YXRlJztcclxuaW1wb3J0IHsgQ2xvc2VXaW5kb3dCeVRpbWVyIH0gZnJvbSAnLi9Db21tYW5kL0Nsb3NlV2luZG93QnlUaW1lcic7XHJcbmltcG9ydCB7IERpc3Bvc2VXaW5kb3dDb21tYW5kIH0gZnJvbSAnLi9Db21tYW5kL0Rpc3Bvc2VXaW5kb3dDb21tYW5kJztcclxuaW1wb3J0IHsgT3BlbkV4dGVybmFsTGlua0NvbW1hbmQgfSBmcm9tICcuL0NvbW1hbmQvT3BlbkV4dGVybmFsTGlua0NvbW1hbmQnO1xyXG5pbXBvcnQgeyBQcmludEFjdGlvbiB9IGZyb20gJy4vQ29tbWFuZC9QcmludEFjdGlvbic7XHJcbmltcG9ydCB7IFNldFRleHRUb0RhdGFNYW5hZ2VyQ29tbWFuZCB9IGZyb20gJy4vQ29tbWFuZC9TZXRUZXh0VG9EYXRhTWFuYWdlckNvbW1hbmQnO1xyXG5pbXBvcnQgeyBXaW5kb3dUeXBlIH0gZnJvbSAnLi9Db21tYW5kL1dpbmRvd1R5cGUnO1xyXG5cclxuQEV4Y2VwdGlvbkhhbmRsZXJDbGFzcyhFcnJvckNvZGVzLkNsaWVudENvcmUpXHJcbmV4cG9ydCBjbGFzcyBWaWV3TWFuYWdlciBpbXBsZW1lbnRzIElWaWV3TWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihpbmplY3Q6IElJbmplY3QgPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5pbmplY3QgPSBpbmplY3QgfHwgSW5qZWN0Lkluc3RhbmNlO1xyXG4gICAgICAgIHRoaXMudmlld1Jlc29sdmVyID0gdGhpcy5pbmplY3QucmVzb2x2ZShDb25zdGFudHMuVmlld1Jlc29sdmVyKTtcclxuICAgICAgICB0aGlzLnZpZXdzID0gbmV3IERpY3Rpb25hcnkoKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdWaWV3cyA9IG5ldyBEaWN0aW9uYXJ5KCk7XHJcbiAgICAgICAgdGhpcy5jb21tYW5kcyA9IG5ldyBEaWN0aW9uYXJ5KCk7XHJcbiAgICAgICAgdGhpcy5hY3Rpb24gPSB0aGlzLmluamVjdC5yZXNvbHZlKENvbnN0YW50cy5BY3Rpb24pO1xyXG4gICAgICAgIHRoaXMubW9kYWxGYWN0b3J5ID0gdGhpcy5pbmplY3QucmVzb2x2ZShDb25zdGFudHMuTW9kYWxGYWN0b3J5KTtcclxuICAgICAgICB0aGlzLmV2ZW50ID0gdGhpcy5pbmplY3QucmVzb2x2ZShDb25zdGFudHMuRXZlbnRBZ2dyZWdhdG9yKTtcclxuICAgICAgICB0aGlzLmluaXRpYWxpemVDb21tYW5kKCk7XHJcbiAgICB9XHJcbiAgICBwcm90ZWN0ZWQgdmlld3M6IElEaWN0aW9uYXJ5O1xyXG4gICAgcHJvdGVjdGVkIHBlbmRpbmdWaWV3czogSURpY3Rpb25hcnk7XHJcbiAgICBwcm90ZWN0ZWQgdmlld1Jlc29sdmVyOiBJVmlld1Jlc29sdmVyO1xyXG4gICAgcHJvdGVjdGVkIGFjdGlvbjogSUFjdGlvbjtcclxuICAgIHByb3RlY3RlZCBtb2RlbHM6IElFbnRpdHk7XHJcbiAgICBwcm90ZWN0ZWQgb25SZWdpc3RlckNvbW1hbmQ6ICgpID0+IHZvaWQ7XHJcbiAgICBwcm90ZWN0ZWQgbW9kYWxGYWN0b3J5OiBJTW9kYWxGYWN0b3J5O1xyXG4gICAgcHJvdGVjdGVkIGV2ZW50OiBJRXZlbnRBZ2dyZWdhdG9yO1xyXG4gICAgcHJpdmF0ZSBpbmplY3Q6IElJbmplY3Q7XHJcbiAgICBwcml2YXRlIGNvbW1hbmRzOiBJRGljdGlvbmFyeTtcclxuICAgIHByaXZhdGUgbGFzdEZvY3VzZWRDb250cm9sOiBhbnk7XHJcblxyXG4gICAgY3JlYXRlVmlldyhtb2RlbDogSU1vZGVsLCBpdGVtcz86IEFycmF5PHN0cmluZz4sIHZpZXdzPzogQXJyYXk8SVZpZXc+KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKGl0ZW1zICYmIHZpZXdzKSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlld1Jlc29sdmVyLnJlc29sdmUobW9kZWwsIHZpZXcgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmlld3MucHVzaCh2aWV3KTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlld0NyZWF0ZWQodmlldyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmlld3MubGVuZ3RoID09PSBpdGVtcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtcy5mb3JFYWNoKGMgPT4gdmlld3MuZmlsdGVyKGQgPT4gZC5tb2RlbC5VbmlxdWVJRCA9PT0gYykuZm9yRWFjaCh2ID0+IHRoaXMudmlld0xvYWQodiwgdmlld3MpKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlld1Jlc29sdmVyLnJlc29sdmUobW9kZWwsIHZpZXcgPT4gdGhpcy52aWV3Q3JlYXRlZCh2aWV3KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZpZXdMb2FkKHZpZXc6IElWaWV3LCB2aWV3czogQXJyYXk8SVZpZXc+KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHZpZXcuaXNQZW5kaW5nTG9hZCh2aWV3LCB2aWV3cykpIHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nVmlld3MuYWRkKHZpZXcubW9kZWwuVW5pcXVlSUQsIHZpZXcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHZpZXcubG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZW1vdmVQZW5kaW5nVmlldyh2aWV3SWQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHZpZXcgPSB0aGlzLnBlbmRpbmdWaWV3cy52YWx1ZSh2aWV3SWQpO1xyXG4gICAgICAgIGlmICh2aWV3KSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1ZpZXdzLnJlbW92ZSh2aWV3SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRQZW5kaW5nVmlld3MoKTogRGljdGlvbmFyeSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLnBlbmRpbmdWaWV3cyBhcyBEaWN0aW9uYXJ5KTtcclxuICAgIH1cclxuXHJcbiAgICB2aWV3Q3JlYXRlZCh2aWV3OiBJVmlldyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmlld3MuYWRkKHZpZXcubW9kZWwuVW5pcXVlSUQsIHZpZXcpO1xyXG4gICAgfVxyXG5cclxuICAgIGRlbGV0ZVZpZXcodmlld0lkOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy52aWV3cy52YWx1ZSh2aWV3SWQpO1xyXG4gICAgICAgIGlmICh2aWV3KSB7XHJcbiAgICAgICAgICAgIHZpZXcuY2xvc2UoKTtcclxuICAgICAgICAgICAgdGhpcy52aWV3cy5yZW1vdmUodmlld0lkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0VG9wVmlldyh2aWV3SWQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB2aWV3ID0gdGhpcy52aWV3cy52YWx1ZSh2aWV3SWQpO1xyXG4gICAgICAgIGlmICh2aWV3KSB7XHJcbiAgICAgICAgICAgIHZpZXcuZm9jdXMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Vmlldyhtb2RlbDogSU1vZGVsKTogSVZpZXcge1xyXG4gICAgICAgIGNvbnN0IHVuaXF1ZUlkID0gbW9kZWwuVW5pcXVlSUQ7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudmlld3MudmFsdWUodW5pcXVlSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbW92ZVZpZXdzKGRhdGEpOiB2b2lkIHtcclxuICAgICAgICBpZiAoZGF0YS5SZW1vdmVkVmlld3MpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCByZW1vdmVkIG9mIGRhdGEuUmVtb3ZlZFZpZXdzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZVZpZXcocmVtb3ZlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZXhlY3V0ZShjb21tYW5kOiBJQ29tbWFuZCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbW1hbmRzLnZhbHVlKGNvbW1hbmQubmFtZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5jb21tYW5kcy52YWx1ZShjb21tYW5kLm5hbWUpKGNvbW1hbmQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBoYXNDb21tYW5kKGNvbW1hbmQ6IElDb21tYW5kKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIGNvbW1hbmQgJiYgdGhpcy5jb21tYW5kcyAmJiB0aGlzLmNvbW1hbmRzLmNvbnRhaW5zS2V5KGNvbW1hbmQubmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVnaXN0ZXJDb21tYW5kKG5hbWU6IHN0cmluZywgZm46IChjb21tYW5kOiBJQ29tbWFuZCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY29tbWFuZHMuYWRkKG5hbWUsIGZuKTtcclxuICAgIH1cclxuXHJcbiAgICByZWdpc3Rlck1vZGFsKG1vZGFsOiBJTW9kYWwpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1vZGFsRmFjdG9yeS5yZWdpc3Rlcihtb2RhbCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdCh2aWV3czogYW55LCBtb2RlbHM6IElFbnRpdHkpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1vZGVscyA9IG1vZGVscztcclxuICAgICAgICB0aGlzLmxvYWRGaXJzdFZpZXdzKHZpZXdzKTtcclxuICAgIH1cclxuXHJcbiAgICBsb2FkRmlyc3RWaWV3cyh2aWV3czogYW55KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHZpZXdzICYmIHZpZXdzLkxvYWRlZFZpZXdzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyVmlld3MgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBjdXJyZW50IG9mIHZpZXdzLkxvYWRlZFZpZXdzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RlbCA9IHRoaXMubW9kZWxzLmdldE1vZGVsKGN1cnJlbnQuVW5pcXVlSUQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzTW9kYWxWaWV3KGN1cnJlbnQuVW5pcXVlSUQsIHZpZXdzLk1vZGFsVmlld3MpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWwuSXNNb2RhbFZpZXcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVWaWV3KG1vZGVsLCB2aWV3cy5Mb2FkZWRWaWV3cy5tYXAoYyA9PiBjLlVuaXF1ZUlEKSwgb3JkZXJWaWV3cyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgbG9hZERlbHRhcyh2aWV3RGVsdGFzKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yZW1vdmVWaWV3cyh2aWV3RGVsdGFzKTtcclxuICAgICAgICB0aGlzLmxvYWROZXdWaWV3cyh2aWV3RGVsdGFzLk5ld1ZpZXdzLCB2aWV3RGVsdGFzLk1vZGFsVmlld3MpO1xyXG4gICAgICAgIHRoaXMuc2V0Rm9jdXModmlld0RlbHRhcy5DdXJyZW50Rm9jdXNlZENvbnRyb2wpO1xyXG4gICAgICAgIHRoaXMuc2V0VG9wVmlldyh2aWV3RGVsdGFzLk5ld1RvcFZpZXcpO1xyXG4gICAgfVxyXG5cclxuICAgIGNyZWF0ZVZpZXdzKHZpZXdJZHM6IEFycmF5PHN0cmluZz4pOiB2b2lkIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYk1hcCA1IGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBpbiBXZWJNYXAgNCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZVZpZXdzKHZpZXdJZHM6IEFycmF5PHN0cmluZz4pOiB2b2lkIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dlYk1hcCA1IGZ1bmN0aW9uIG5vdCBpbXBsZW1lbnRlZCBpbiBXZWJNYXAgNCcpO1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0RWRpdENvbnRyb2xIYW5kbGVyKGNvbW1hbmQ6IFN0YXJ0RWRpdCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGNvbnRyb2wgPSB0aGlzLm1vZGVscy5nZXRNb2RlbChjb21tYW5kLm15Q29udHJvbElkKTtcclxuICAgICAgICBpZiAoY29udHJvbCkge1xyXG4gICAgICAgICAgICAoY29udHJvbCBhcyBhbnkpLnN0YXJ0RWRpdGluZyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qIGM4IGlnbm9yZSBzdGFydCAqL1xyXG4gICAgcHJvdGVjdGVkIGluaXRpYWxpemVDb21tYW5kKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLkNsb3NlQ29tbWFuZCwgY29tbWFuZCA9PiB0aGlzLmNsb3NlSGFuZGxlcihjb21tYW5kIGFzIENsb3NlKSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoQ29tbWFuZHMuQ2xpZW50Q2xvc2VDb21tYW5kLCBjb21tYW5kID0+IHRoaXMuY2xpZW50Q2xvc2VIYW5kbGVyKGNvbW1hbmQgYXMgQ2xpZW50Q2xvc2UpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5TZW5kQ29tbWFuZCwgY29tbWFuZCA9PiB0aGlzLnNlbmRIYW5kbGVyKGNvbW1hbmQgYXMgU2VuZCkpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLklucHV0Qm94QWN0aW9uQ29tbWFuZCwgY29tbWFuZCA9PiB0aGlzLmlucHV0Qm94QWN0aW9uSGFuZGxlcihjb21tYW5kIGFzIElucHV0Qm94QWN0aW9uKSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoQ29tbWFuZHMuTW9kYWxDb21tYW5kLCBjb21tYW5kID0+IHRoaXMubW9kYWxIYW5kbGVyKGNvbW1hbmQgYXMgTW9kYWxDb21tYW5kKSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoQ29tbWFuZHMuTW9kYWxBY3Rpb25Db21tYW5kLCBjb21tYW5kID0+IHRoaXMubW9kYWxBY3Rpb25IYW5kbGVyKGNvbW1hbmQgYXMgTW9kYWxBY3Rpb24pKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5Nb2RhbEFjdGlvbkJ1dHRvbkNvbW1hbmQsIGNvbW1hbmQgPT4gdGhpcy5tb2RhbEFjdGlvbkJ1dHRvbkhhbmRsZXIoY29tbWFuZCBhcyBNb2RhbEFjdGlvbkJ1dHRvbikpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLktleVByZXNzQ29tbWFuZCwgY29tbWFuZCA9PiB0aGlzLmtleVByZXNzSGFuZGxlcihjb21tYW5kIGFzIEtleVByZXNzKSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoQ29tbWFuZHMuUHJpbnRBY3Rpb25Db21tYW5kLCBjb21tYW5kID0+IHRoaXMucHJpbnRBY3Rpb25IYW5kbGVyKGNvbW1hbmQgYXMgUHJpbnRBY3Rpb24pKTtcclxuICAgICAgICAvLyByZWdpc3RlciB2aWV3IGNvbW1hbmRzXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoQ29tbWFuZHMuTWVzc2FnZUJveCwgY29tbWFuZCA9PiB0aGlzLm1lc3NhZ2VCb3hIYW5kbGVyKGNvbW1hbmQgYXMgTWVzc2FnZUJveCkpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLk1zZ0JveCwgY29tbWFuZCA9PiB0aGlzLm1zZ0JveEhhbmRsZXIoY29tbWFuZCBhcyBNc2dCb3gpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5PcGVuVmlldywgY29tbWFuZCA9PiB0aGlzLm9wZW5WaWV3SGFuZGxlcihjb21tYW5kIGFzIE9wZW5WaWV3KSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoQ29tbWFuZHMuQ2xvc2VWaWV3LCBjb21tYW5kID0+IHRoaXMuY2xvc2VWaWV3SGFuZGxlcihjb21tYW5kIGFzIENsb3NlVmlldykpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLklucHV0Qm94LCBjb21tYW5kID0+IHRoaXMuaW5wdXRCb3hIYW5kbGVyKGNvbW1hbmQgYXMgSW5wdXRCb3gpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5DaGFuZ2VGb2N1c0NvbnRyb2xDb21tYW5kLCBjb21tYW5kID0+IHRoaXMuY2hhbmdlZm9jdXNDb250cm9sSGFuZGxlcihjb21tYW5kIGFzIENoYW5nZUZvY3VzQ29udHJvbCkpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLlN0YXJ0RWRpdENvbW1hbmQsIGNvbW1hbmQgPT4gdGhpcy5zdGFydEVkaXRDb250cm9sSGFuZGxlcihjb21tYW5kIGFzIFN0YXJ0RWRpdCkpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLkNoYW5nZU1lbnVDb21tYW5kLCBjb21tYW5kID0+IHRoaXMuY2hhbmdlTWVudUhhbmRsZXIoY29tbWFuZCBhcyBDaGFuZ2VNZW51KSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoQ29tbWFuZHMuQ2hhbmdlTWVudVN0YXRlQ29tbWFuZCwgY29tbWFuZCA9PiB0aGlzLmNoYW5nZU1lbnVTdGF0ZUhhbmRsZXIoY29tbWFuZCBhcyBDaGFuZ2VNZW51U3RhdGUpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5DaGFuZ2VTdGF0dXNDb21tYW5kLCBjb21tYW5kID0+IHRoaXMuY2hhbmdlU3RhdHVzSGFuZGxlcihjb21tYW5kIGFzIENoYW5nZVN0YXR1cykpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLkZpbGVFeHBsb3JlciwgY29tbWFuZCA9PiB0aGlzLmZpbGVFeHBsb3JlckhhbmRsZXIoY29tbWFuZCBhcyBGaWxlRXhwbG9yZXJSZW1vdGUpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5GaWxlRXhwbG9yZXJJbnB1dCwgY29tbWFuZCA9PiB0aGlzLmZpbGVFeHBsb3JlckhhbmRsZXIoY29tbWFuZCBhcyBGaWxlRXhwbG9yZXJSZW1vdGVJbnB1dCkpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLlJlZnJlc2hBcHBsaWNhdGlvbk1lbnUsIGNvbW1hbmQgPT5cclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoQXBwbGljYXRpb25NZW51SGFuZGxlcihjb21tYW5kIGFzIFJlZnJlc2hBcHBsaWNhdGlvbk1lbnUpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5RdWl0Q3VycmVudEFwcGxpY2F0aW9uLCBjb21tYW5kID0+IHRoaXMucXVpdEN1cnJlbnRBcHBsaWNhdGlvbihjb21tYW5kIGFzIFF1aXRDdXJyZW50QXBwbGljYXRpb24pKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5QcmludFNjcmVlbkNvbW1hbmQsIGNvbW1hbmQgPT4gdGhpcy5wcmludFNjcmVlbkhhbmRsZXIoY29tbWFuZCBhcyBQcmludFNjcmVlbikpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLkNvbnRleHRNZW51Q29tbWFuZCwgY29tbWFuZCA9PiB0aGlzLmNvbnRleHRNZW51SGFuZGxlcihjb21tYW5kIGFzIENvbnRleHRNZW51KSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoQ29tbWFuZHMuRGlzcG9zZVdpbmRvd0NvbW1hbmQsIGNvbW1hbmQgPT4gdGhpcy5kaXBvc2VXaW5kb3dIYW5kbGVyKGNvbW1hbmQgYXMgRGlzcG9zZVdpbmRvd0NvbW1hbmQpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5TZXRUZXh0VG9EYXRhTWFuYWdlckNvbW1hbmQsIGNvbW1hbmQgPT5cclxuICAgICAgICAgICAgdGhpcy5zZXRUZXh0VG9EYXRhTWFuYWdlckhhbmRsZXIoY29tbWFuZCBhcyBTZXRUZXh0VG9EYXRhTWFuYWdlckNvbW1hbmQpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5DbG9zZVdpbmRvd0J5VGltZXJDb21tYW5kLCBjb21tYW5kID0+IHRoaXMuY2xvc2VXaW5kb3dCeVRpbWVySGFuZGxlcihjb21tYW5kIGFzIENsb3NlV2luZG93QnlUaW1lcikpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLlNlcnZlclZlcnNpb25Db21tYW5kLCBjb21tYW5kID0+IHRoaXMucmVnaXN0ZXJWZXJzaW9uKGNvbW1hbmQgYXMgU2VydmVyVmVyc2lvbkNvbW1hbmQpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5BcnJhbmdlV2luZG93Q29tbWFuZCwgY29tbWFuZCA9PiB0aGlzLmFycmFuZ2VXaW5kb3dIYW5kbGVyKGNvbW1hbmQgYXMgQXJyYW5nZVdpbmRvd0NvbW1hbmQpKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZChDb21tYW5kcy5Qb3BNZW51Q29tbWFuZCwgY29tbWFuZCA9PiB0aGlzLnBvcE1lbnVIYW5kbGVyKGNvbW1hbmQgYXMgUG9wTWVudSkpO1xyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKENvbW1hbmRzLk9wZW5FeHRlcm5hbExpbmtDb21tYW5kLCBjb21tYW5kID0+IHRoaXMub3BlbkV4dGVybmFsTGlua0hhbmRsZXIoY29tbWFuZCBhcyBPcGVuRXh0ZXJuYWxMaW5rQ29tbWFuZClcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgaWYgKHRoaXMub25SZWdpc3RlckNvbW1hbmQpIHtcclxuICAgICAgICAgICAgdGhpcy5vblJlZ2lzdGVyQ29tbWFuZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qIGM4IGlnbm9yZSBzdG9wICovXHJcblxyXG4gICAgcHJvdGVjdGVkIGRpcG9zZVdpbmRvd0hhbmRsZXIoZGlzcG9zZVdpbmRvdzogRGlzcG9zZVdpbmRvd0NvbW1hbmQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBtb2RlbFJlc29sdmVyID0gdGhpcy5pbmplY3QucmVzb2x2ZShDb25zdGFudHMuTW9kZWxSZXNvbHZlcik7XHJcbiAgICAgICAgbW9kZWxSZXNvbHZlci5yZXNvbHZlUmVtb3ZlZChbZGlzcG9zZVdpbmRvdy53aW5kb3dJZF0pO1xyXG4gICAgICAgIHRoaXMuZXZlbnQucHVibGlzaCgnZGlzcG9zZVZpZXcnLCBkaXNwb3NlV2luZG93LndpbmRvd0lkKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgY2hhbmdlTWVudVN0YXRlSGFuZGxlcihjb21tYW5kOiBDaGFuZ2VNZW51U3RhdGUpOiB2b2lkIHtcclxuICAgICAgICBsZXQgcGFyZW50ID0gKHRoaXMubW9kZWxzLmdldE1vZGVsKGNvbW1hbmQucGFyZW50V2luZG93KSBhcyBhbnkpO1xyXG4gICAgICAgIGNvbnN0IHRvb2xCYXJWaXNpYmxlID0gY29tbWFuZC50b29sQmFyVmlzaWJsZTtcclxuICAgICAgICBwYXJlbnQgPSBwYXJlbnQuUGFyZW50V2luZG93ID8gKHRoaXMubW9kZWxzLmdldE1vZGVsKHBhcmVudC5QYXJlbnRXaW5kb3cpIGFzIGFueSkgOiBwYXJlbnQ7XHJcbiAgICAgICAgaWYgKHBhcmVudC5NZW51KSB7XHJcbiAgICAgICAgICAgIHBhcmVudC50b29sYmFyVmlzaWJsZUludGVybmFsID0gdG9vbEJhclZpc2libGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBjaGFuZ2VNZW51SGFuZGxlcihjb21tYW5kOiBDaGFuZ2VNZW51KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgcGFyZW50ID0gKHRoaXMubW9kZWxzLmdldE1vZGVsKGNvbW1hbmQucGFyZW50V2luZG93KSBhcyBhbnkpO1xyXG4gICAgICAgIGNvbnN0IG1lbnUgPSAocGFyZW50ICYmICFwYXJlbnQuTWVudSkgPyBwYXJlbnQuTWVudUlEIDogKHRoaXMubW9kZWxzLmdldE1vZGVsKGNvbW1hbmQubmV3TWVudUlkKSBhcyBhbnkpO1xyXG4gICAgICAgIGNvbnN0IHRvb2xiYXJmcmFtZXRpdGxlID0gY29tbWFuZC50b29sQmFyRnJhbWVUaXRsZTtcclxuICAgICAgICBjb25zdCB0b29sYmFyc2hlZXR0aXRsZSA9IGNvbW1hbmQudG9vbEJhclNoZWV0VGl0bGU7XHJcbiAgICAgICAgaWYgKHBhcmVudCAmJiBtZW51KSB7XHJcbiAgICAgICAgICAgIG1lbnUuVG9vbGJhclZpc2libGUgPSBwYXJlbnQuVG9vbGJhclZpc2libGU7XHJcbiAgICAgICAgICAgIG1lbnUuVG9vbEJhckZyYW1lVGl0bGUgPSB0b29sYmFyZnJhbWV0aXRsZTtcclxuICAgICAgICAgICAgbWVudS5Ub29sQmFyU2hlZXRUaXRsZSA9IHRvb2xiYXJzaGVldHRpdGxlO1xyXG4gICAgICAgICAgICBpZiAocGFyZW50LldpbmRvd1R5cGUgPT09IFdpbmRvd1R5cGUubWRpIHx8XHJcbiAgICAgICAgICAgICAgICBwYXJlbnQuV2luZG93VHlwZSA9PT0gV2luZG93VHlwZS5tZGloZWxwIHx8XHJcbiAgICAgICAgICAgICAgICAhcGFyZW50LlBhcmVudFdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50Lk1lbnUgPSBtZW51O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWVudS5pc0NoaWxkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5QYXJlbnRXaW5kb3cuTWVudSA9IG1lbnU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWVudS5SZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHNldFRleHRUb0RhdGFNYW5hZ2VySGFuZGxlcihjb21tYW5kOiBTZXRUZXh0VG9EYXRhTWFuYWdlckNvbW1hbmQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmV2ZW50LnB1Ymxpc2goRXZlbnRzLlNldERNVGV4dCwgY29tbWFuZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGFycmFuZ2VXaW5kb3dIYW5kbGVyKGNvbW1hbmQ6IEFycmFuZ2VXaW5kb3dDb21tYW5kKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ldmVudC5wdWJsaXNoKEV2ZW50cy5BcnJhbmdlV2luZG93LCBjb21tYW5kKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZpbGVFeHBsb3JlckhhbmRsZXIoY29tbWFuZDogRmlsZUV4cGxvcmVyUmVtb3RlIHwgRmlsZUV4cGxvcmVyUmVtb3RlSW5wdXQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBtb2RhbCA9IHRoaXMubW9kYWxGYWN0b3J5LmNyZWF0ZShjb21tYW5kLk1vZGFsTmFtZSk7XHJcbiAgICAgICAgbW9kYWwuc2hvdyhjb21tYW5kKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoYW5nZVN0YXR1c0hhbmRsZXIoY29tbWFuZDogQ2hhbmdlU3RhdHVzKTogYW55IHtcclxuICAgICAgICBjb25zdCBtZW51ID0gKHRoaXMubW9kZWxzLmdldE1vZGVsKGNvbW1hbmQuTURJSWQpIGFzIGFueSk7XHJcbiAgICAgICAgaWYgKG1lbnUpIHtcclxuICAgICAgICAgICAgbWVudS5NaWNyb0hlbHAgPSBjb21tYW5kLm1lc3NhZ2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0Rm9jdXMoY29udHJvbCk6IHZvaWQge1xyXG4gICAgICAgIGlmIChjb250cm9sKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGVsID0gdGhpcy5tb2RlbHMuc2VhcmNoKGNvbnRyb2wpO1xyXG4gICAgICAgICAgICBpZiAobW9kZWwpIHtcclxuICAgICAgICAgICAgICAgIG1vZGVsLmFwcGx5TWV0aG9kKCdmb2N1cycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbG9hZE5ld1ZpZXdzKG5ld1ZpZXdzOiBBcnJheTxzdHJpbmc+LCBtb2RhbFZpZXdzOiBBcnJheTxzdHJpbmc+KTogdm9pZCB7XHJcbiAgICAgICAgaWYgKG5ld1ZpZXdzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG9yZGVyVmlld3MgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIG5ld1ZpZXdzKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RlbCA9IHRoaXMubW9kZWxzLmdldE1vZGVsKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNNb2RhbFZpZXcoaXRlbSwgbW9kYWxWaWV3cykpIHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbC5Jc01vZGFsVmlldyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZVZpZXcobW9kZWwsIG5ld1ZpZXdzLCBvcmRlclZpZXdzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGlzTW9kYWxWaWV3KHZpZXdJZDogc3RyaW5nLCBtb2RhbFZpZXdzOiBBcnJheTxzdHJpbmc+KTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIChtb2RhbFZpZXdzICYmIG1vZGFsVmlld3MuaW5kZXhPZih2aWV3SWQpID4gLTEpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5wdXRCb3hIYW5kbGVyKGNvbW1hbmQ6IElucHV0Qm94KTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgbW9kYWwgPSB0aGlzLm1vZGFsRmFjdG9yeS5jcmVhdGUoY29tbWFuZC5uYW1lKTtcclxuICAgICAgICBtb2RhbC5zaG93KGNvbW1hbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbWVzc2FnZUJveEhhbmRsZXIoY29tbWFuZDogTWVzc2FnZUJveCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG1vZGFsID0gdGhpcy5tb2RhbEZhY3RvcnkuY3JlYXRlKCdtc2cnKTtcclxuICAgICAgICBtb2RhbC5zaG93KGNvbW1hbmQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbXNnQm94SGFuZGxlcihjb21tYW5kOiBNc2dCb3gpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBtb2RhbCA9IHRoaXMubW9kYWxGYWN0b3J5LmNyZWF0ZShjb21tYW5kLm5hbWUpO1xyXG4gICAgICAgIG1vZGFsLnNob3coY29tbWFuZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBvcGVuVmlld0hhbmRsZXIoY29tbWFuZDogT3BlblZpZXcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBtb2RlbCA9IHRoaXMubW9kZWxzLmdldE1vZGVsKGNvbW1hbmQuVW5pcXVlSUQpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVmlldyhtb2RlbCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjbG9zZVZpZXdIYW5kbGVyKGNvbW1hbmQ6IENsb3NlVmlldyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZGVsZXRlVmlldyhjb21tYW5kLlVuaXF1ZUlEKTtcclxuICAgICAgICB0aGlzLm1vZGVscy5kZWxldGVDYXNjYWRlKGNvbW1hbmQuVW5pcXVlSUQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xvc2VIYW5kbGVyKGNvbW1hbmQ6IENsb3NlKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hY3Rpb24uc2VuZChuZXcgQWN0aW9uTW9kZWwoY29tbWFuZC5zZW5kZXIubmFtZSwgY29tbWFuZC5hY3Rpb24sIGNvbW1hbmQuc2VuZGVyLm1vZGVsKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjbGllbnRDbG9zZUhhbmRsZXIoY29tbWFuZDogQ2xpZW50Q2xvc2UpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFjdGlvbi5zZW5kKG5ldyBBY3Rpb25Nb2RlbChjb21tYW5kLmNvbnRyb2xsZXIsIGNvbW1hbmQuYWN0aW9uLCB1bmRlZmluZWQsIGNvbW1hbmQuYXJncykpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2VuZEhhbmRsZXIoY29tbWFuZDogU2VuZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWN0aW9uLnNlbmQoXHJcbiAgICAgICAgICAgIG5ldyBBY3Rpb25Nb2RlbChcclxuICAgICAgICAgICAgICAgIGNvbW1hbmQuc2VuZGVyLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBjb21tYW5kLmFjdGlvbixcclxuICAgICAgICAgICAgICAgIGNvbW1hbmQuc2VuZGVyLm1vZGVsLFxyXG4gICAgICAgICAgICAgICAgY29tbWFuZC5hcmdzLFxyXG4gICAgICAgICAgICAgICAgY29tbWFuZC5jYWxsYmFjayxcclxuICAgICAgICAgICAgICAgIG51bGwsXHJcbiAgICAgICAgICAgICAgICBjb21tYW5kLmhpZ2hQcmlvcml0eSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgbW9kYWxIYW5kbGVyKGNvbW1hbmQ6IE1vZGFsQ29tbWFuZCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG1vZGFsID0gdGhpcy5tb2RhbEZhY3RvcnkuY3JlYXRlKGNvbW1hbmQubW9kYWxOYW1lKCkpO1xyXG4gICAgICAgIGlmIChtb2RhbCkge1xyXG4gICAgICAgICAgICBtb2RhbC5zaG93KGNvbW1hbmQucGFyYW1ldGVycygpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBwcmludEFjdGlvbkhhbmRsZXIoY29tbWFuZDogUHJpbnRBY3Rpb24pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbmRQcmludEFjdGlvbkhhbmRsZXIoY29tbWFuZCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZW5kUHJpbnRBY3Rpb25IYW5kbGVyKGNvbW1hbmQ6IFByaW50QWN0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hY3Rpb24uc2VuZChuZXcgQWN0aW9uTW9kZWwoY29tbWFuZC5jb250cm9sbGVyLCBjb21tYW5kLmFjdGlvbiwgbnVsbCwge1xyXG4gICAgICAgICAgICBkaWFsb2dSZXN1bHQ6IGNvbW1hbmQuZGlhbG9nUmVzdWx0LFxyXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiBjb21tYW5kLmFyZ3NcclxuICAgICAgICB9LCB1bmRlZmluZWQsIG5ldyBSZXF1ZXN0Q29uZmlnKFJlcXVlc3RUeXBlLlJhd1JlcXVlc3QpKSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBtb2RhbEFjdGlvbkhhbmRsZXIoY29tbWFuZDogTW9kYWxBY3Rpb24pOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbmRBY3Rpb25IYW5kbGVyKGNvbW1hbmQsICdSZXN1bWVPcGVyYXRpb24nKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIG1vZGFsQWN0aW9uQnV0dG9uSGFuZGxlcihjb21tYW5kOiBNb2RhbEFjdGlvbkJ1dHRvbik6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2VuZEFjdGlvbkJ1dHRvbkhhbmRsZXIoY29tbWFuZCwgJ1Jlc3VtZU9wZXJhdGlvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaW5wdXRCb3hBY3Rpb25IYW5kbGVyKGNvbW1hbmQ6IElucHV0Qm94QWN0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZW5kQWN0aW9uSGFuZGxlcihjb21tYW5kLCAnV2ViTWFwVmlld01hbmFnZXInKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNoYW5nZWZvY3VzQ29udHJvbEhhbmRsZXIoY29tbWFuZDogQ2hhbmdlRm9jdXNDb250cm9sKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbCA9IHRoaXMubW9kZWxzLmdldE1vZGVsKGNvbW1hbmQubXlDb250cm9sSWQpO1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3RGb2N1c2VkQ29udHJvbCkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3RGb2N1c2VkQ29udHJvbC5pc0ZvY3VzZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbnRyb2wpIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Rm9jdXNlZENvbnRyb2wgPSBjb250cm9sO1xyXG4gICAgICAgICAgICAoY29udHJvbCBhcyBhbnkpLmlzRm9jdXNlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVmcmVzaEFwcGxpY2F0aW9uTWVudUhhbmRsZXIoY29tbWFuZDogUmVmcmVzaEFwcGxpY2F0aW9uTWVudSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG1lbnUgPSAodGhpcy5tb2RlbHMuZ2V0TW9kZWwoY29tbWFuZC5tZW51SWQpIGFzIGFueSk7XHJcbiAgICAgICAgaWYgKG1lbnUpIHtcclxuICAgICAgICAgICAgbWVudS5SZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZW5kQWN0aW9uSGFuZGxlcihjb21tYW5kOiBhbnksIGNvbnRyb2xsZXI6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuYWN0aW9uLnNlbmQobmV3IEFjdGlvbk1vZGVsKGNvbnRyb2xsZXIsICdSZXN1bWVQZW5kaW5nT3BlcmF0aW9uJywgbnVsbCwge1xyXG4gICAgICAgICAgICBkaWFsb2dSZXN1bHQ6IGNvbW1hbmQuZGlhbG9nUmVzdWx0LFxyXG4gICAgICAgICAgICByZXF1ZXN0ZWRJbnB1dDogY29tbWFuZC5yZXF1ZXN0ZWRJbnB1dFxyXG4gICAgICAgIH0sIHVuZGVmaW5lZCwgbmV3IFJlcXVlc3RDb25maWcoUmVxdWVzdFR5cGUuUmF3UmVxdWVzdCkpKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHNlbmRBY3Rpb25CdXR0b25IYW5kbGVyKGNvbW1hbmQ6IE1vZGFsQWN0aW9uQnV0dG9uLCBjb250cm9sbGVyOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmFjdGlvbi5zZW5kKG5ldyBBY3Rpb25Nb2RlbChjb250cm9sbGVyLCAnUmVzdW1lUGVuZGluZ09wZXJhdGlvbicsIG51bGwsIHtcclxuICAgICAgICAgICAgYnV0dG9uczogY29tbWFuZC5idXR0b25zXHJcbiAgICAgICAgfSwgdW5kZWZpbmVkLCBuZXcgUmVxdWVzdENvbmZpZyhSZXF1ZXN0VHlwZS5SYXdSZXF1ZXN0KSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUga2V5UHJlc3NIYW5kbGVyKGNvbW1hbmQ6IEtleVByZXNzKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5hY3Rpb24uc2VuZChcclxuICAgICAgICAgICAgbmV3IEFjdGlvbk1vZGVsKGNvbW1hbmQuc2VuZGVyLm5hbWUsIGNvbW1hbmQuYWN0aW9uLCBjb21tYW5kLnNlbmRlci5tb2RlbCwgbmV3IEFycmF5PGFueT4oeyBrZXlDb2RlOiBjb21tYW5kLmtleSB9KSkpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcXVpdEN1cnJlbnRBcHBsaWNhdGlvbihjb21tYW5kOiBRdWl0Q3VycmVudEFwcGxpY2F0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5ldmVudC5wdWJsaXNoKEV2ZW50cy5BcHBsaWNhdGlvblJlc3RhcnQpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcHJpbnRTY3JlZW5IYW5kbGVyKGNvbW1hbmQ6IFByaW50U2NyZWVuKTogdm9pZCB7XHJcbiAgICAgICAgd2luZG93LnByaW50KCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjb250ZXh0TWVudUhhbmRsZXIoY29tbWFuZDogQ29udGV4dE1lbnUpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBzdWJNZW51ID0gKHRoaXMubW9kZWxzLmdldE1vZGVsKGNvbW1hbmQuc3ViTWVudSkgYXMgYW55KTtcclxuICAgICAgICBjb25zdCB3aW5kb3cgPSAodGhpcy5tb2RlbHMuZ2V0TW9kZWwoY29tbWFuZC53aW5kb3cpIGFzIGFueSk7XHJcbiAgICAgICAgaWYgKHN1Yk1lbnUgJiYgd2luZG93KSB7XHJcbiAgICAgICAgICAgIHN1Yk1lbnUuUmVmcmVzaCA9IHRydWU7XHJcbiAgICAgICAgICAgIHdpbmRvdy5Db250ZXh0TWVudSA9IHN1Yk1lbnU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgb3BlbkV4dGVybmFsTGlua0hhbmRsZXIoY29tbWFuZDogT3BlbkV4dGVybmFsTGlua0NvbW1hbmQpOiB2b2lkIHtcclxuICAgICAgICB3aW5kb3cub3Blbihjb21tYW5kLnBhdGgsICdfYmxhbmsnKTtcclxuICAgICAgfVxyXG5cclxuICAgIHByaXZhdGUgY2xvc2VXaW5kb3dCeVRpbWVySGFuZGxlcihjb21tYW5kOiBDbG9zZVdpbmRvd0J5VGltZXIpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBtb2RlbDogYW55ID0gdGhpcy5tb2RlbHMuZ2V0TW9kZWwoY29tbWFuZC53aW5kb3dJZCk7XHJcbiAgICAgICAgbW9kZWwuY2xvc2VCeVRpbWUgPSBjb21tYW5kLm1pbGlTZWNvbmRzO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcG9wTWVudUhhbmRsZXIoY29tbWFuZDogUG9wTWVudSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IG1vZGVsOiBhbnkgPSB0aGlzLm1vZGVscy5nZXRNb2RlbChjb21tYW5kLndpbmRvd0lkKTtcclxuICAgICAgICBpZiAobW9kZWwpIHtcclxuICAgICAgICAgICAgbW9kZWwucG9wTWVudSA9IGNvbW1hbmQuc3ViTWVudUlkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyVmVyc2lvbihjb21tYW5kOiBTZXJ2ZXJWZXJzaW9uQ29tbWFuZCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHZlcnNpb246IElWZXJzaW9uID0gKHdpbmRvdyBhcyBhbnkpLmFwcC52ZXJzaW9uO1xyXG4gICAgICAgIHZlcnNpb24uZGNwVmVyc2lvbiA9IGNvbW1hbmQuZGNwVmVyc2lvbjtcclxuICAgICAgICB2ZXJzaW9uLmNvcmVWZXJzaW9uID0gY29tbWFuZC5jb3JlVmVyc2lvbjtcclxuICAgIH1cclxufVxyXG4iXX0=","map":null,"metadata":{},"sourceType":"module"}