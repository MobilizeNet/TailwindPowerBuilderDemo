{"ast":null,"code":"import { Inject } from '../../../Application';\nimport { Constants, Order } from '../../../Contract';\n\nvar VisualWorker = function () {\n  function VisualWorker(inject) {\n    if (inject === void 0) {\n      inject = null;\n    }\n\n    this.inject = inject;\n    this.inject = inject || Inject.Instance;\n    this.viewManager = this.inject.resolve(Constants.ViewManager);\n  }\n\n  VisualWorker.prototype.process = function (response) {\n    if (response) {\n      this.viewManager.removeViews(response.removed);\n\n      if (response.added) {\n        var addedFormIds = response.added.filter(function (projection) {\n          return projection.IsForm;\n        }).map(function (projection) {\n          return projection.Id;\n        });\n        this.viewManager.createViews(addedFormIds);\n      }\n\n      if (response.changed) {\n        var changedFormIds = response.changed.filter(function (projection) {\n          return projection.IsForm;\n        }).map(function (projection) {\n          return projection.Id;\n        });\n        this.viewManager.updateViews(changedFormIds);\n      }\n    }\n  };\n\n  Object.defineProperty(VisualWorker.prototype, \"Order\", {\n    get: function () {\n      return Order.POST;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return VisualWorker;\n}();\n\nexport { VisualWorker }; //# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmlzdWFsV29ya2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL3Y1L0FwcGxpY2F0aW9uL0RlbHRhV29ya2Vycy9WaXN1YWxXb3JrZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBa0JBLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUM5QyxPQUFPLEVBQUUsU0FBUyxFQUFrRCxLQUFLLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVyRztJQUVJLHNCQUFvQixNQUFzQjtRQUF0Qix1QkFBQSxFQUFBLGFBQXNCO1FBQXRCLFdBQU0sR0FBTixNQUFNLENBQWdCO1FBQ3RDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxJQUFJLE1BQU0sQ0FBQyxRQUFRLENBQUM7UUFDeEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDbEUsQ0FBQztJQUlELDhCQUFPLEdBQVAsVUFBUSxRQUFtQjtRQUN2QixJQUFJLFFBQVEsRUFBRTtZQUVWLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUcvQyxJQUFJLFFBQVEsQ0FBQyxLQUFLLEVBQUU7Z0JBQ2hCLElBQU0sWUFBWSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFVBQUEsVUFBVSxJQUFJLE9BQUEsVUFBVSxDQUFDLE1BQU0sRUFBakIsQ0FBaUIsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxVQUFBLFVBQVUsSUFBSSxPQUFBLFVBQVUsQ0FBQyxFQUFFLEVBQWIsQ0FBYSxDQUFDLENBQUM7Z0JBQzdHLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLFlBQVksQ0FBQyxDQUFDO2FBQzlDO1lBR0QsSUFBSSxRQUFRLENBQUMsT0FBTyxFQUFFO2dCQUNsQixJQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFBLFVBQVUsSUFBSSxPQUFBLFVBQVUsQ0FBQyxNQUFNLEVBQWpCLENBQWlCLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBQSxVQUFVLElBQUksT0FBQSxVQUFVLENBQUMsRUFBRSxFQUFiLENBQWEsQ0FBQyxDQUFDO2dCQUNqSCxJQUFJLENBQUMsV0FBVyxDQUFDLFdBQVcsQ0FBQyxjQUFjLENBQUMsQ0FBQzthQUNoRDtTQUNKO0lBQ0wsQ0FBQztJQUVELHNCQUFJLCtCQUFLO2FBQVQ7WUFDSSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDdEIsQ0FBQzs7O09BQUE7SUFDTCxtQkFBQztBQUFELENBQUMsQUEvQkQsSUErQkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuKiBDb3B5cmlnaHQgKEMpIE1vYmlsaXplLk5ldCA8aW5mb0Btb2JpbGl6ZS5uZXQ+IC0gQWxsIFJpZ2h0cyBSZXNlcnZlZFxyXG4qXHJcbiogVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIE1vYmlsaXplIEZyYW1ld29ya3MsIHdoaWNoIGlzXHJcbiogcHJvcHJpZXRhcnkgYW5kIGNvbmZpZGVudGlhbC5cclxuKlxyXG4qIE5PVElDRTogIEFsbCBpbmZvcm1hdGlvbiBjb250YWluZWQgaGVyZWluIGlzLCBhbmQgcmVtYWluc1xyXG4qIHRoZSBwcm9wZXJ0eSBvZiBNb2JpbGl6ZS5OZXQgQ29ycG9yYXRpb24uXHJcbiogVGhlIGludGVsbGVjdHVhbCBhbmQgdGVjaG5pY2FsIGNvbmNlcHRzIGNvbnRhaW5lZCBoZXJlaW4gYXJlXHJcbiogcHJvcHJpZXRhcnkgdG8gTW9iaWxpemUuTmV0IENvcnBvcmF0aW9uIGFuZCBtYXkgYmUgY292ZXJlZFxyXG4qIGJ5IFUuUy4gUGF0ZW50cywgYW5kIGFyZSBwcm90ZWN0ZWQgYnkgdHJhZGUgc2VjcmV0IG9yIGNvcHlyaWdodCBsYXcuXHJcbiogRGlzc2VtaW5hdGlvbiBvZiB0aGlzIGluZm9ybWF0aW9uIG9yIHJlcHJvZHVjdGlvbiBvZiB0aGlzIG1hdGVyaWFsXHJcbiogaXMgc3RyaWN0bHkgZm9yYmlkZGVuIHVubGVzcyBwcmlvciB3cml0dGVuIHBlcm1pc3Npb24gaXMgb2J0YWluZWRcclxuKiBmcm9tIE1vYmlsaXplLk5ldCBDb3Jwb3JhdGlvbi5cclxuKlxyXG4qIFRoaXMgZmlsZSBpcyBzdWJqZWN0IHRvIHRoZSB0ZXJtcyBhbmQgY29uZGl0aW9ucyBkZWZpbmVkIGluXHJcbiogZmlsZSAnTElDRU5TRS50eHQnLCB3aGljaCBpcyBwYXJ0IG9mIHRoaXMgc291cmNlIGNvZGUgcGFja2FnZS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbmltcG9ydCB7IEluamVjdCB9IGZyb20gJy4uLy4uLy4uL0FwcGxpY2F0aW9uJztcclxuaW1wb3J0IHsgQ29uc3RhbnRzLCBJRGVsdGFXb3JrZXIsIElJbmplY3QsIElSZXNwb25zZSwgSVZpZXdNYW5hZ2VyLCBPcmRlciB9IGZyb20gJy4uLy4uLy4uL0NvbnRyYWN0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBWaXN1YWxXb3JrZXIgaW1wbGVtZW50cyBJRGVsdGFXb3JrZXIge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgaW5qZWN0OiBJSW5qZWN0ID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuaW5qZWN0ID0gaW5qZWN0IHx8IEluamVjdC5JbnN0YW5jZTtcclxuICAgICAgICB0aGlzLnZpZXdNYW5hZ2VyID0gdGhpcy5pbmplY3QucmVzb2x2ZShDb25zdGFudHMuVmlld01hbmFnZXIpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgdmlld01hbmFnZXI6IElWaWV3TWFuYWdlcjtcclxuXHJcbiAgICBwcm9jZXNzKHJlc3BvbnNlOiBJUmVzcG9uc2UpOiB2b2lkIHtcclxuICAgICAgICBpZiAocmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgLy8gUHJvY2VzcyByZW1vdmVkIGZvcm1zXHJcbiAgICAgICAgICAgIHRoaXMudmlld01hbmFnZXIucmVtb3ZlVmlld3MocmVzcG9uc2UucmVtb3ZlZCk7XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGFkZGVkIGZvcm1zXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS5hZGRlZCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWRkZWRGb3JtSWRzID0gcmVzcG9uc2UuYWRkZWQuZmlsdGVyKHByb2plY3Rpb24gPT4gcHJvamVjdGlvbi5Jc0Zvcm0pLm1hcChwcm9qZWN0aW9uID0+IHByb2plY3Rpb24uSWQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3TWFuYWdlci5jcmVhdGVWaWV3cyhhZGRlZEZvcm1JZHMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGNoYW5nZWQgZm9ybXNcclxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmNoYW5nZWQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZWRGb3JtSWRzID0gcmVzcG9uc2UuY2hhbmdlZC5maWx0ZXIocHJvamVjdGlvbiA9PiBwcm9qZWN0aW9uLklzRm9ybSkubWFwKHByb2plY3Rpb24gPT4gcHJvamVjdGlvbi5JZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdNYW5hZ2VyLnVwZGF0ZVZpZXdzKGNoYW5nZWRGb3JtSWRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXQgT3JkZXIoKTogT3JkZXIge1xyXG4gICAgICAgIHJldHVybiBPcmRlci5QT1NUO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==","map":null,"metadata":{},"sourceType":"module"}