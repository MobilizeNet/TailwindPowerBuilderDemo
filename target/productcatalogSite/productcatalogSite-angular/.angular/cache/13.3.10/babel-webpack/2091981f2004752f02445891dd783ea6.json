{"ast":null,"code":"import PolarPlotAreaBase from './polar-plotarea-base';\nimport CategoricalPlotArea from './categorical-plotarea';\nimport RadarAreaChart from '../radar-area-chart/radar-area-chart';\nimport RadarLineChart from '../radar-line-chart/radar-line-chart';\nimport RadarBarChart from '../radar-bar-chart/radar-bar-chart';\nimport PlotAreaEventsMixin from '../mixins/plotarea-events-mixin';\nimport { RadarCategoryAxis, Point } from '../../core';\nimport { RADAR_AREA, RADAR_LINE, RADAR_COLUMN } from '../constants';\nimport filterSeriesByType from '../utils/filter-series-by-type';\nimport { ARC } from '../../common/constants';\nimport { eventElement, deepExtend, setDefaultOptions } from '../../common';\n\nclass RadarPlotArea extends PolarPlotAreaBase {\n  createPolarAxis() {\n    const categoryAxis = new RadarCategoryAxis(this.options.categoryAxis, this.chartService);\n    this.polarAxis = categoryAxis;\n    this.categoryAxis = categoryAxis;\n    this.appendAxis(categoryAxis);\n    this.aggregateCategories();\n    this.createCategoryAxesLabels();\n  }\n\n  valueAxisOptions(defaults) {\n    if (this._hasBarCharts) {\n      deepExtend(defaults, {\n        majorGridLines: {\n          type: ARC\n        },\n        minorGridLines: {\n          type: ARC\n        }\n      });\n    }\n\n    if (this._isStacked100) {\n      deepExtend(defaults, {\n        roundToMajorUnit: false,\n        labels: {\n          format: \"P0\"\n        }\n      });\n    }\n\n    return deepExtend(defaults, this.options.valueAxis);\n  }\n\n  aggregateCategories() {\n    // No separate panes in radar charts\n    CategoricalPlotArea.prototype.aggregateCategories.call(this, this.panes);\n  }\n\n  createCategoryAxesLabels() {\n    CategoricalPlotArea.prototype.createCategoryAxesLabels.call(this, this.panes);\n  }\n\n  filterSeries(currentSeries) {\n    // Not supported for radar charts\n    return currentSeries;\n  }\n\n  createCharts() {\n    const series = this.filterVisibleSeries(this.series);\n    const pane = this.panes[0];\n    this.createAreaChart(filterSeriesByType(series, [RADAR_AREA]), pane);\n    this.createLineChart(filterSeriesByType(series, [RADAR_LINE]), pane);\n    this.createBarChart(filterSeriesByType(series, [RADAR_COLUMN]), pane);\n  }\n\n  chartOptions(series) {\n    const options = {\n      series: series\n    };\n    const firstSeries = series[0];\n\n    if (firstSeries) {\n      const filteredSeries = this.filterVisibleSeries(series);\n      const stack = firstSeries.stack;\n      options.isStacked = stack && filteredSeries.length > 1;\n      options.isStacked100 = stack && stack.type === \"100%\" && filteredSeries.length > 1;\n\n      if (options.isStacked100) {\n        this._isStacked100 = true;\n      }\n    }\n\n    return options;\n  }\n\n  createAreaChart(series, pane) {\n    if (series.length === 0) {\n      return;\n    }\n\n    const areaChart = new RadarAreaChart(this, this.chartOptions(series));\n    this.appendChart(areaChart, pane);\n  }\n\n  createLineChart(series, pane) {\n    if (series.length === 0) {\n      return;\n    }\n\n    const lineChart = new RadarLineChart(this, this.chartOptions(series));\n    this.appendChart(lineChart, pane);\n  }\n\n  createBarChart(series, pane) {\n    if (series.length === 0) {\n      return;\n    }\n\n    const firstSeries = series[0];\n    const options = this.chartOptions(series);\n    options.gap = firstSeries.gap;\n    options.spacing = firstSeries.spacing;\n    const barChart = new RadarBarChart(this, options);\n    this.appendChart(barChart, pane);\n    this._hasBarCharts = true;\n  }\n\n  seriesCategoryAxis() {\n    return this.categoryAxis;\n  }\n\n  _dispatchEvent(chart, e, eventType) {\n    const coords = chart._eventCoordinates(e);\n\n    const point = new Point(coords.x, coords.y);\n    const category = this.categoryAxis.getCategory(point);\n    const value = this.valueAxis.getValue(point);\n\n    if (category !== null && value !== null) {\n      chart.trigger(eventType, {\n        element: eventElement(e),\n        category: category,\n        value: value\n      });\n    }\n  }\n\n  createCrosshairs() {}\n\n}\n\ndeepExtend(RadarPlotArea.prototype, PlotAreaEventsMixin, {\n  appendChart: CategoricalPlotArea.prototype.appendChart,\n  aggregateSeries: CategoricalPlotArea.prototype.aggregateSeries,\n  seriesSourcePoints: CategoricalPlotArea.prototype.seriesSourcePoints\n});\nsetDefaultOptions(RadarPlotArea, {\n  categoryAxis: {\n    categories: []\n  },\n  valueAxis: {}\n});\nexport default RadarPlotArea;","map":null,"metadata":{},"sourceType":"module"}